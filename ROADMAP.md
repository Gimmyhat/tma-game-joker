# Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ: Backend Ğ´Ğ»Ñ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡Ğ½Ğ¾Ğ¹ Ğ¸Ğ³Ñ€Ñ‹ Joker

## ğŸ“‹ ĞĞ±Ñ‰Ğ°Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ

**ĞŸÑ€Ğ¾ĞµĞºÑ‚:** Real-time multiplayer ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡Ğ½Ğ°Ñ Ğ¸Ğ³Ñ€Ğ° "Joker" Ğ´Ğ»Ñ Telegram MiniApp  
**ĞŸĞ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ°:** Telegram WebApp (Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ğµ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°, Ğ²ĞµĞ±)  
**ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ²:** 4 (Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¾Ğ¹ Ğ·Ğ°Ğ¼ĞµĞ½Ñ‹ Ğ±Ğ¾Ñ‚Ğ°Ğ¼Ğ¸)  
**Ğ‘ÑĞ´Ğ¶ĞµÑ‚:** 200 000 â‚½  
**Ğ¡Ñ€Ğ¾Ğº Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸:** 7-8 Ğ½ĞµĞ´ĞµĞ»ÑŒ (56 Ğ´Ğ½ĞµĞ¹)  
**ĞĞ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ğ°Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°:** 100-200 Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ¸Ğ³Ñ€ (400-800 Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğ¹)

---

## ğŸ¯ Ğ¦ĞµĞ»Ğ¸ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

### ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ñ†ĞµĞ»ÑŒ
Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ **server authoritative** backend Ğ´Ğ»Ñ Ğ¼Ğ½Ğ¾Ğ³Ğ¾Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¾Ğ¹ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡Ğ½Ğ¾Ğ¹ Ğ¸Ğ³Ñ€Ñ‹ Ñ:
- Ğ¡Ñ‚Ñ€Ğ¾Ğ³Ğ¾Ğ¹ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸ĞµĞ¹ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»
- Real-time ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸ĞµĞ¹
- Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ¾Ğ¹ Ğ¾Ñ‚ Ñ‡Ğ¸Ñ‚Ğ¾Ğ²
- Ğ¡Ñ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ¹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ¾Ğ¹ Ğ² ÑƒÑĞ»Ğ¾Ğ²Ğ¸ÑÑ… Ğ½ĞµÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚Ğ°

### ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
1. âœ… ĞšĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ°Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ²ÑĞµÑ… Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ» Ğ¸Ğ³Ñ€Ñ‹ (24 Ñ€Ğ°Ğ·Ğ´Ğ°Ñ‡Ğ¸, 4 "Ğ¿ÑƒĞ»ÑŒĞºĞ¸", Ğ¿Ñ€ĞµĞ¼Ğ¸Ğ¸, ÑˆÑ‚Ñ€Ğ°Ñ„Ñ‹)
2. âœ… Ğ£ÑÑ‚Ğ¾Ğ¹Ñ‡Ğ¸Ğ²Ğ¾ÑÑ‚ÑŒ Ğº Ñ€Ğ°Ğ·Ñ€Ñ‹Ğ²Ğ°Ğ¼ ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ñ (Telegram lifecycle Ğ½Ğ° iOS)
3. âœ… Ğ—Ğ°Ğ¼ĞµĞ½Ğ° Ğ¾Ñ‚ĞºĞ»ÑÑ‡Ğ¸Ğ²ÑˆĞ¸Ñ…ÑÑ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ² Ğ±Ğ¾Ñ‚Ğ°Ğ¼Ğ¸
4. âœ… ĞŸĞ¾ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ unit-Ñ‚ĞµÑÑ‚Ğ°Ğ¼Ğ¸ Ğ²ÑĞµÑ… ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ» (80%+)
5. âœ… API Ğ´Ğ»Ñ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ñ Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´Ğ¾Ğ¼

---

## ğŸ—ï¸ Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº

### Backend Framework
- **Node.js 20+** (LTS Ğ²ĞµÑ€ÑĞ¸Ñ)
- **NestJS 10+** â€” Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒĞ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°, DI, Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ°Ñ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ WebSocket
- **TypeScript 5+** â€” ÑÑ‚Ñ€Ğ¾Ğ³Ğ°Ñ Ñ‚Ğ¸Ğ¿Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾Ğ¹ Ğ¸Ğ³Ñ€Ğ¾Ğ²Ğ¾Ğ¹ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸

### Real-time Communication
- **Socket.io 4+** (ĞĞ• uWebSockets.js)
  - **ĞĞ±Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ°:**
    - âœ… ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¿ĞµÑ€ĞµĞ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ (ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ Ğ´Ğ»Ñ Telegram)
    - âœ… Fallback Ğ½Ğ° Long Polling (ĞµÑĞ»Ğ¸ WebSocket Ğ·Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½)
    - âœ… ĞÑ„Ğ¸Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° NestJS (`@nestjs/websockets`)
    - âœ… Ğ’ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ğ¹ Room API
    - âœ… Ğ‘Ğ¾Ğ»ÑŒÑˆĞ¾Ğµ ĞºĞ¾Ğ¼ÑŒÑĞ½Ğ¸Ñ‚Ğ¸ Ğ¸ ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ
  - **ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ:** 100,000 msg/sec (Ğ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ğ´Ğ»Ñ 100-200 Ğ¸Ğ³Ñ€)

### Databases
- **Redis 7+** â€” Hot Data (Ñ‚ĞµĞºÑƒÑ‰ĞµĞµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¸Ğ³Ñ€ Ğ² Ğ¾Ğ¿ĞµÑ€Ğ°Ñ‚Ğ¸Ğ²Ğ½Ğ¾Ğ¹ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸)
  - Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… Ğ¸Ğ³Ñ€Ğ¾Ğ²Ñ‹Ñ… ÑĞµÑÑĞ¸Ğ¹
  - TTL Ğ´Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ Ğ¾Ñ‡Ğ¸ÑÑ‚ĞºĞ¸ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ½Ñ‹Ñ… Ğ¸Ğ³Ñ€
  - Pub/Sub Ğ´Ğ»Ñ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ´Ğ»Ñ Ğ±ÑƒĞ´ÑƒÑ‰ĞµĞ³Ğ¾)
  
- **PostgreSQL 15+** â€” Cold Data (Ğ¿ĞµÑ€ÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ½Ğ¾Ğµ Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ)
  - Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ½Ñ‹Ñ… Ğ¸Ğ³Ñ€
  - ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»Ğ¸ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ²
  - Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ»Ğ¸Ğ´ĞµÑ€Ğ¾Ğ²
  - **Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ:** JSONB (ĞĞ• Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹)

### Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸
- **@nestjs/typeorm** â€” ORM Ğ´Ğ»Ñ PostgreSQL
- **ioredis** â€” ĞºĞ»Ğ¸ĞµĞ½Ñ‚ Ğ´Ğ»Ñ Redis
- **class-validator** â€” Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ DTO
- **jest** â€” unit Ğ¸ integration Ñ‚ĞµÑÑ‚Ñ‹
- **@types/node** â€” Ñ‚Ğ¸Ğ¿Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Node.js API

### DevOps (Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ½Ğ°Ğ±Ğ¾Ñ€ Ğ´Ğ»Ñ MVP)
- **Docker + Docker Compose** â€” ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
- **PM2** â€” process manager Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞºĞ¾Ğ¼
- **GitHub Actions** â€” CI/CD (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)

---

## ğŸ“ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

### High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Telegram Bot   â”‚ (notifications, auth validation)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         NestJS Application              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   WebSocket Gateway (Socket.io)  â”‚   â”‚
â”‚  â”‚  - Connection Management         â”‚   â”‚
â”‚  â”‚  - Room Manager                  â”‚   â”‚
â”‚  â”‚  - Event Handlers                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚             â”‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚      Game Engine (Core)          â”‚   â”‚
â”‚  â”‚  - State Machine                 â”‚   â”‚
â”‚  â”‚  - Move Validator                â”‚   â”‚
â”‚  â”‚  - Scoring Calculator            â”‚   â”‚
â”‚  â”‚  - Bot AI (Dumb Bot)             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚             â”‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Redis Service   â”‚  â”‚ Postgres   â”‚  â”‚
â”‚  â”‚  (Hot State)      â”‚  â”‚ (History)  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞœĞ¾Ğ´ÑƒĞ»ÑŒĞ½Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° (NestJS)

```
src/
â”œâ”€â”€ app.module.ts                 # Root module
â”œâ”€â”€ main.ts                       # Application entry point
â”‚
â”œâ”€â”€ auth/                         # Telegram authentication
â”‚   â”œâ”€â”€ auth.module.ts
â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â””â”€â”€ telegram.guard.ts
â”‚
â”œâ”€â”€ game/                         # Core game logic
â”‚   â”œâ”€â”€ game.module.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                   # Data models
â”‚   â”‚   â”œâ”€â”€ card.model.ts
â”‚   â”‚   â”œâ”€â”€ player.model.ts
â”‚   â”‚   â”œâ”€â”€ game-state.model.ts
â”‚   â”‚   â””â”€â”€ enums.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ validators/               # Rule validation
â”‚   â”‚   â”œâ”€â”€ move.validator.ts
â”‚   â”‚   â”œâ”€â”€ bet.validator.ts
â”‚   â”‚   â””â”€â”€ joker.validator.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                 # Business logic
â”‚   â”‚   â”œâ”€â”€ game-engine.service.ts
â”‚   â”‚   â”œâ”€â”€ scoring.service.ts
â”‚   â”‚   â”œâ”€â”€ deck.service.ts
â”‚   â”‚   â””â”€â”€ state-machine.service.ts
â”‚   â”‚
â”‚   â””â”€â”€ tests/                    # Unit tests
â”‚       â”œâ”€â”€ game-engine.spec.ts
â”‚       â”œâ”€â”€ scoring.spec.ts
â”‚       â””â”€â”€ validators.spec.ts
â”‚
â”œâ”€â”€ gateway/                      # WebSocket layer
â”‚   â”œâ”€â”€ gateway.module.ts
â”‚   â”œâ”€â”€ game.gateway.ts
â”‚   â”œâ”€â”€ room.manager.ts
â”‚   â””â”€â”€ dto/
â”‚       â”œâ”€â”€ join-room.dto.ts
â”‚       â”œâ”€â”€ make-bet.dto.ts
â”‚       â””â”€â”€ throw-card.dto.ts
â”‚
â”œâ”€â”€ bot/                          # Bot AI
â”‚   â”œâ”€â”€ bot.module.ts
â”‚   â”œâ”€â”€ bot.service.ts
â”‚   â””â”€â”€ strategies/
â”‚       â””â”€â”€ random-valid-move.strategy.ts
â”‚
â”œâ”€â”€ database/                     # Data persistence
â”‚   â”œâ”€â”€ database.module.ts
â”‚   â”œâ”€â”€ redis.service.ts
â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â””â”€â”€ game.repository.ts
â”‚   â””â”€â”€ entities/
â”‚       â””â”€â”€ game.entity.ts
â”‚
â”œâ”€â”€ api/                          # REST API (Ğ´Ğ»Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸)
â”‚   â”œâ”€â”€ api.module.ts
â”‚   â””â”€â”€ controllers/
â”‚       â”œâ”€â”€ games.controller.ts
â”‚       â””â”€â”€ leaderboard.controller.ts
â”‚
â””â”€â”€ common/                       # Shared utilities
    â”œâ”€â”€ constants.ts
    â”œâ”€â”€ exceptions/
    â””â”€â”€ interceptors/
```

---

## ğŸ® Ğ˜Ğ³Ñ€Ğ¾Ğ²Ğ°Ñ Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸ĞºĞ° (ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ°)

### ĞšÑ€Ğ°Ñ‚ĞºĞ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ¸Ğ³Ñ€Ñ‹

**Joker** â€” ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡Ğ½Ğ°Ñ Ğ¸Ğ³Ñ€Ğ° Ğ´Ğ»Ñ 4 Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ² Ğ½Ğ° 24 Ñ€Ğ°ÑƒĞ½Ğ´Ğ¾Ğ² (Ñ€Ğ°Ğ·Ğ´Ğ°Ñ‡Ğ¸).

**Ğ¦ĞµĞ»ÑŒ:** ĞĞ°Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¼Ğ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¾Ñ‡ĞºĞ¾Ğ² Ğ·Ğ° 4 "Ğ¿ÑƒĞ»ÑŒĞºĞ¸" (Ğ±Ğ»Ğ¾ĞºĞ° Ñ€Ğ°Ğ·Ğ´Ğ°Ñ‡).

**ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ½ÑÑ‚Ğ¸Ñ:**
- **Ğ Ğ°Ğ·Ğ´Ğ°Ñ‡Ğ° (Ğ Ğ°ÑƒĞ½Ğ´):** Ğ˜Ğ³Ñ€Ğ¾ĞºĞ°Ğ¼ Ñ€Ğ°Ğ·Ğ´Ğ°ĞµÑ‚ÑÑ N ĞºĞ°Ñ€Ñ‚, Ğ¾Ğ½Ğ¸ Ğ´ĞµĞ»Ğ°ÑÑ‚ Ğ·Ğ°ĞºĞ°Ğ·Ñ‹ (bet) Ğ¸ Ğ¸Ğ³Ñ€Ğ°ÑÑ‚
- **Ğ’Ğ·ÑÑ‚ĞºĞ° (Trick):** 4 ĞºĞ°Ñ€Ñ‚Ñ‹ Ğ½Ğ° ÑÑ‚Ğ¾Ğ»Ğµ, Ğ·Ğ°Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ¸Ğ³Ñ€Ğ¾Ğº Ñ ÑĞ°Ğ¼Ğ¾Ğ¹ ÑĞ¸Ğ»ÑŒĞ½Ğ¾Ğ¹ ĞºĞ°Ñ€Ñ‚Ğ¾Ğ¹
- **Ğ—Ğ°ĞºĞ°Ğ· (Bet):** ĞŸÑ€Ğ¾Ğ³Ğ½Ğ¾Ğ· ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ° Ğ²Ğ·ÑÑ‚Ğ¾Ğº, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ğ¸Ğ³Ñ€Ğ¾Ğº Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€ÑƒĞµÑ‚ Ğ²Ğ·ÑÑ‚ÑŒ
- **ĞŸÑƒĞ»ÑŒĞºĞ°:** Ğ‘Ğ»Ğ¾Ğº Ğ¸Ğ· 8-9 Ñ€Ğ°Ğ·Ğ´Ğ°Ñ‡, Ğ¿Ğ¾ÑĞ»Ğµ ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ´ÑÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ Ğ¾Ñ‡ĞºĞ¸ Ğ¸ Ğ¿Ñ€ĞµĞ¼Ğ¸Ğ¸

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¸Ğ³Ñ€Ñ‹ (24 Ñ€Ğ°ÑƒĞ½Ğ´Ğ°)

#### ĞŸÑƒĞ»ÑŒĞºĞ° 1 (Ñ€Ğ°ÑƒĞ½Ğ´Ñ‹ 1-8): Ğ Ğ°Ğ·Ğ´Ğ°Ñ‡Ğ¸ Ğ¾Ñ‚ 1 Ğ´Ğ¾ 8
- Ğ Ğ°ÑƒĞ½Ğ´ 1: 1 ĞºĞ°Ñ€Ñ‚Ğ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼Ñƒ
- Ğ Ğ°ÑƒĞ½Ğ´ 2: 2 ĞºĞ°Ñ€Ñ‚Ñ‹ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼Ñƒ
- ...
- Ğ Ğ°ÑƒĞ½Ğ´ 8: 8 ĞºĞ°Ñ€Ñ‚ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼Ñƒ

#### ĞŸÑƒĞ»ÑŒĞºĞ° 2 (Ñ€Ğ°ÑƒĞ½Ğ´Ñ‹ 9-12): 4 Ñ€Ğ°Ğ·Ğ´Ğ°Ñ‡Ğ¸ Ğ¿Ğ¾ 9 ĞºĞ°Ñ€Ñ‚
- **ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ:** Ğ˜Ğ³Ñ€Ğ¾Ğº Ñ Ğ¿Ñ€Ğ°Ğ²Ğ¾Ğ¼ Ñ…Ğ¾Ğ´Ğ° Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ ĞºĞ¾Ğ·Ñ‹Ñ€ÑŒ (Ğ¸Ğ»Ğ¸ "Ğ±ĞµĞ· ĞºĞ¾Ğ·Ñ‹Ñ€ĞµĞ¹")
- Ğ’ÑĞµĞ¼ Ñ€Ğ°Ğ·Ğ´Ğ°ĞµÑ‚ÑÑ Ğ¿Ğ¾ 9 ĞºĞ°Ñ€Ñ‚, Ğ¸Ğ³Ñ€Ğ¾Ğº Ğ¿Ğ¾ÑĞ»Ğµ Ñ€Ğ°Ğ·Ğ´Ğ°ÑÑ‰ĞµĞ³Ğ¾ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ ÑĞ²Ğ¾Ğ¸ ĞºĞ°Ñ€Ñ‚Ñ‹ Ğ¸ Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ¼Ğ°ÑÑ‚ÑŒ ĞºĞ¾Ğ·Ñ‹Ñ€Ñ

#### ĞŸÑƒĞ»ÑŒĞºĞ° 3 (Ñ€Ğ°ÑƒĞ½Ğ´Ñ‹ 13-20): Ğ Ğ°Ğ·Ğ´Ğ°Ñ‡Ğ¸ Ğ¾Ñ‚ 8 Ğ´Ğ¾ 1
- Ğ Ğ°ÑƒĞ½Ğ´ 13: 8 ĞºĞ°Ñ€Ñ‚ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼Ñƒ
- Ğ Ğ°ÑƒĞ½Ğ´ 14: 7 ĞºĞ°Ñ€Ñ‚ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼Ñƒ
- ...
- Ğ Ğ°ÑƒĞ½Ğ´ 20: 1 ĞºĞ°Ñ€Ñ‚Ğ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼Ñƒ

#### ĞŸÑƒĞ»ÑŒĞºĞ° 4 (Ñ€Ğ°ÑƒĞ½Ğ´Ñ‹ 21-24): 4 Ñ€Ğ°Ğ·Ğ´Ğ°Ñ‡Ğ¸ Ğ¿Ğ¾ 9 ĞºĞ°Ñ€Ñ‚ (ĞºĞ¾Ğ¿Ğ¸Ñ ĞŸÑƒĞ»ÑŒĞºĞ¸ 2)
- **ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ:** Ğ˜Ğ³Ñ€Ğ¾Ğº Ñ Ğ¿Ñ€Ğ°Ğ²Ğ¾Ğ¼ Ñ…Ğ¾Ğ´Ğ° Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ ĞºĞ¾Ğ·Ñ‹Ñ€ÑŒ (Ğ¸Ğ»Ğ¸ "Ğ±ĞµĞ· ĞºĞ¾Ğ·Ñ‹Ñ€ĞµĞ¹")
- ĞĞ½Ğ°Ğ»Ğ¾Ğ³Ğ¸Ñ‡Ğ½Ğ¾ ĞŸÑƒĞ»ÑŒĞºĞµ 2: Ğ²ÑĞµĞ¼ Ñ€Ğ°Ğ·Ğ´Ğ°ĞµÑ‚ÑÑ Ğ¿Ğ¾ 9 ĞºĞ°Ñ€Ñ‚ Ñ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ¾Ğ¼ ĞºĞ¾Ğ·Ñ‹Ñ€Ñ

### ĞšĞ¾Ğ»Ğ¾Ğ´Ğ° ĞºĞ°Ñ€Ñ‚

**Ğ¡Ğ¾ÑÑ‚Ğ°Ğ²:** 36 ĞºĞ°Ñ€Ñ‚ (34 ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ñ‹Ğµ + 2 Ğ´Ğ¶Ğ¾ĞºĞµÑ€Ğ°)
- ĞœĞ°ÑÑ‚Ğ¸: â™¥ï¸ Ğ§ĞµÑ€Ğ²Ñ‹, â™¦ï¸ Ğ‘ÑƒĞ±Ğ½Ñ‹, â™£ï¸ Ğ¢Ñ€ĞµÑ„Ñ‹, â™ ï¸ ĞŸĞ¸ĞºĞ¸
- Ğ Ğ°Ğ½Ğ³Ğ¸: 6, 7, 8, 9, 10, J (Ğ’Ğ°Ğ»ĞµÑ‚), Q (Ğ”Ğ°Ğ¼Ğ°), K (ĞšĞ¾Ñ€Ğ¾Ğ»ÑŒ), A (Ğ¢ÑƒĞ·)
- **ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒÑÑ‚:** Ğ§ĞµÑ€Ğ½Ñ‹Ğµ ÑˆĞµÑÑ‚ĞµÑ€ĞºĞ¸ (6â™£ï¸, 6â™ ï¸)
- **Ğ”Ğ¶Ğ¾ĞºĞµÑ€Ñ‹:** 2 ĞºĞ°Ñ€Ñ‚Ñ‹ (ÑĞ°Ğ¼Ñ‹Ğµ ÑĞ¸Ğ»ÑŒĞ½Ñ‹Ğµ Ğ² ĞºĞ¾Ğ»Ğ¾Ğ´Ğµ)

**Ğ¡Ñ‚Ğ°Ñ€ÑˆĞ¸Ğ½ÑÑ‚Ğ²Ğ¾ ĞºĞ°Ñ€Ñ‚:** 6 < 7 < 8 < 9 < 10 < J < Q < K < A < Ğ”Ğ¶Ğ¾ĞºĞµÑ€

**Ğ¡Ñ‚Ğ°Ñ€ÑˆĞ¸Ğ½ÑÑ‚Ğ²Ğ¾ Ğ¼Ğ°ÑÑ‚ĞµĞ¹:** Ğ’ÑĞµ Ğ¼Ğ°ÑÑ‚Ğ¸ Ñ€Ğ°Ğ²Ğ½Ñ‹, ĞºÑ€Ğ¾Ğ¼Ğµ **ĞºĞ¾Ğ·Ñ‹Ñ€Ğ½Ğ¾Ğ¹ Ğ¼Ğ°ÑÑ‚Ğ¸** (trump), ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ Ğ±ÑŒĞµÑ‚ Ğ²ÑĞµ Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ.

### ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ñ…Ğ¾Ğ´Ğ°

#### 1. ĞĞ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğµ ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¼Ğ°ÑÑ‚Ğ¸
Ğ•ÑĞ»Ğ¸ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ Ğ¸Ğ³Ñ€Ğ¾Ğº Ğ·Ğ°ÑˆĞµĞ» Ñ Ğ¼Ğ°ÑÑ‚Ğ¸ X:
- **Ğ•ÑÑ‚ÑŒ Ğ¼Ğ°ÑÑ‚ÑŒ X:** ĞĞ‘Ğ¯Ğ—ĞĞ Ğ¸Ğ³Ñ€Ğ°Ñ‚ÑŒ Ğ¼Ğ°ÑÑ‚ÑŒ X
- **ĞĞµÑ‚ Ğ¼Ğ°ÑÑ‚Ğ¸ X, ĞµÑÑ‚ÑŒ ĞºĞ¾Ğ·Ñ‹Ñ€ÑŒ:** ĞĞ‘Ğ¯Ğ—ĞĞ Ğ¸Ğ³Ñ€Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ·Ñ‹Ñ€ÑŒ
- **ĞĞµÑ‚ Ğ¼Ğ°ÑÑ‚Ğ¸ X Ğ¸ ĞºĞ¾Ğ·Ñ‹Ñ€Ñ:** ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ¸Ğ³Ñ€Ğ°Ñ‚ÑŒ Ğ»ÑĞ±ÑƒÑ ĞºĞ°Ñ€Ñ‚Ñƒ

#### 2. Ğ”Ğ¶Ğ¾ĞºĞµÑ€
Ğ”Ğ¶Ğ¾ĞºĞµÑ€ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¸Ğ³Ñ€Ğ°Ñ‚ÑŒ **Ğ² Ğ»ÑĞ±Ğ¾Ğ¹ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚**, Ğ´Ğ°Ğ¶Ğµ Ğ¿Ñ€Ğ¸ Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ğ¸ Ñ‚Ñ€ĞµĞ±ÑƒĞµĞ¼Ğ¾Ğ¹ Ğ¼Ğ°ÑÑ‚Ğ¸ Ğ¸Ğ»Ğ¸ ĞºĞ¾Ğ·Ñ‹Ñ€Ñ.

**4 ÑĞ²Ğ¾Ğ¹ÑÑ‚Ğ²Ğ° Ğ”Ğ¶Ğ¾ĞºĞµÑ€Ğ°:**

##### Ğ¡Ğ²Ğ¾Ğ¹ÑÑ‚Ğ²Ğ¾ 1: "Ğ’Ñ‹ÑÑˆĞ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° Ğ¼Ğ°ÑÑ‚Ğ¸" (High)
Ğ•ÑĞ»Ğ¸ Ğ¸Ğ³Ñ€Ğ¾Ğº Ñ…Ğ¾Ğ´Ğ¸Ñ‚ **Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¼** Ñ Ğ”Ğ¶Ğ¾ĞºĞµÑ€Ğ°:
- ĞœĞ¾Ğ¶ĞµÑ‚ Ğ·Ğ°ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ "Ğ²Ñ‹ÑÑˆÑƒÑ ĞºĞ°Ñ€Ñ‚Ñƒ Ğ¼Ğ°ÑÑ‚Ğ¸ X"
- Ğ”Ğ¶Ğ¾ĞºĞµÑ€ Ğ¸Ğ³Ñ€Ğ°ĞµÑ‚ÑÑ ĞºĞ°Ğº **Ğ²Ñ‹ÑÑˆĞ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° Ğ¼Ğ°ÑÑ‚Ğ¸ X**
- ĞÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¸ **ĞĞ‘Ğ¯Ğ—ĞĞĞ«** Ğ¿Ğ¾Ğ»Ğ¾Ğ¶Ğ¸Ñ‚ÑŒ **ÑĞ°Ğ¼ÑƒÑ Ğ²Ñ‹ÑÑˆÑƒÑ ĞºĞ°Ñ€Ñ‚Ñƒ Ğ¼Ğ°ÑÑ‚Ğ¸ X** Ğ¸Ğ· ÑĞ²Ğ¾ĞµĞ¹ Ñ€ÑƒĞºĞ¸
- Ğ•ÑĞ»Ğ¸ Ñƒ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° Ğ½ĞµÑ‚ Ğ¼Ğ°ÑÑ‚Ğ¸ X â†’ Ğ¸Ğ³Ñ€Ğ°ÑÑ‚ ĞºĞ¾Ğ·Ñ‹Ñ€ÑŒ
- Ğ•ÑĞ»Ğ¸ Ğ½ĞµÑ‚ Ğ¼Ğ°ÑÑ‚Ğ¸ Ğ¸ ĞºĞ¾Ğ·Ñ‹Ñ€Ñ â†’ Ğ»ÑĞ±ÑƒÑ ĞºĞ°Ñ€Ñ‚Ñƒ

##### Ğ¡Ğ²Ğ¾Ğ¹ÑÑ‚Ğ²Ğ¾ 2: "ĞœĞ»Ğ°Ğ´ÑˆĞ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° Ğ¼Ğ°ÑÑ‚Ğ¸" (Low)
Ğ•ÑĞ»Ğ¸ Ğ¸Ğ³Ñ€Ğ¾Ğº Ñ…Ğ¾Ğ´Ğ¸Ñ‚ **Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¼** Ñ Ğ”Ğ¶Ğ¾ĞºĞµÑ€Ğ°:
- ĞœĞ¾Ğ¶ĞµÑ‚ Ğ·Ğ°ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ "Ğ¼Ğ»Ğ°Ğ´ÑˆÑƒÑ ĞºĞ°Ñ€Ñ‚Ñƒ Ğ¼Ğ°ÑÑ‚Ğ¸ X"
- Ğ”Ğ¶Ğ¾ĞºĞµÑ€ Ğ¸Ğ³Ñ€Ğ°ĞµÑ‚ÑÑ ĞºĞ°Ğº **Ğ¼Ğ»Ğ°Ğ´ÑˆĞ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° Ğ¼Ğ°ÑÑ‚Ğ¸ X**
- ĞÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¸ ĞºĞ»Ğ°Ğ´ÑƒÑ‚ **Ğ»ÑĞ±ÑƒÑ ĞºĞ°Ñ€Ñ‚Ñƒ Ğ¼Ğ°ÑÑ‚Ğ¸ X**
- Ğ’Ğ·ÑÑ‚ĞºÑƒ Ğ±ĞµÑ€ĞµÑ‚ Ğ¸Ğ³Ñ€Ğ¾Ğº Ñ ÑĞ°Ğ¼Ğ¾Ğ¹ ÑĞ¸Ğ»ÑŒĞ½Ğ¾Ğ¹ ĞºĞ°Ñ€Ñ‚Ğ¾Ğ¹ Ğ¼Ğ°ÑÑ‚Ğ¸ X
- Ğ•ÑĞ»Ğ¸ Ñƒ Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ² Ğ½ĞµÑ‚ Ğ¼Ğ°ÑÑ‚Ğ¸ X â†’ Ğ²Ğ·ÑÑ‚ĞºÑƒ Ğ±ĞµÑ€ĞµÑ‚ Ğ¸Ğ³Ñ€Ğ¾Ğº Ñ Ğ”Ğ¶Ğ¾ĞºĞµÑ€Ğ¾Ğ¼

##### Ğ¡Ğ²Ğ¾Ğ¹ÑÑ‚Ğ²Ğ¾ 3: "Ğ¡Ğ²ĞµÑ€Ñ…Ñƒ" (Top)
Ğ•ÑĞ»Ğ¸ Ğ¸Ğ³Ñ€Ğ¾Ğº Ğ¸Ğ³Ñ€Ğ°ĞµÑ‚ Ğ”Ğ¶Ğ¾ĞºĞµÑ€Ğ° **Ğ½Ğµ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¼**:
- ĞœĞ¾Ğ¶ĞµÑ‚ Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¾Ğ¿Ñ†Ğ¸Ñ "Ğ¡Ğ²ĞµÑ€Ñ…Ñƒ"
- Ğ”Ğ¶Ğ¾ĞºĞµÑ€ **Ğ¿Ğ¾Ğ±ĞµĞ¶Ğ´Ğ°ĞµÑ‚** Ğ²ÑĞµ ĞºĞ°Ñ€Ñ‚Ñ‹ Ğ½Ğ° ÑÑ‚Ğ¾Ğ»Ğµ
- Ğ˜Ğ³Ñ€Ğ¾Ğº Ñ Ğ”Ğ¶Ğ¾ĞºĞµÑ€Ğ¾Ğ¼ Ğ·Ğ°Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ²Ğ·ÑÑ‚ĞºÑƒ

##### Ğ¡Ğ²Ğ¾Ğ¹ÑÑ‚Ğ²Ğ¾ 4: "Ğ¡Ğ½Ğ¸Ğ·Ñƒ" (Bottom)
Ğ•ÑĞ»Ğ¸ Ğ¸Ğ³Ñ€Ğ¾Ğº Ğ¸Ğ³Ñ€Ğ°ĞµÑ‚ Ğ”Ğ¶Ğ¾ĞºĞµÑ€Ğ° **Ğ½Ğµ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¼**:
- ĞœĞ¾Ğ¶ĞµÑ‚ Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¾Ğ¿Ñ†Ğ¸Ñ "Ğ¡Ğ½Ğ¸Ğ·Ñƒ"
- Ğ”Ğ¶Ğ¾ĞºĞµÑ€ **ĞĞ• Ğ¿Ğ¾Ğ±ĞµĞ¶Ğ´Ğ°ĞµÑ‚** (Ğ²ĞµĞ´ĞµÑ‚ ÑĞµĞ±Ñ ĞºĞ°Ğº ÑĞ°Ğ¼Ğ°Ñ ÑĞ»Ğ°Ğ±Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ°)
- Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ ĞºĞ¾Ğ³Ğ´Ğ° Ğ¸Ğ³Ñ€Ğ¾Ğº Ñ…Ğ¾Ñ‡ĞµÑ‚ ĞĞ• Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ²Ğ·ÑÑ‚ĞºÑƒ

**ĞÑĞ¾Ğ±Ñ‹Ğ¹ ÑĞ»ÑƒÑ‡Ğ°Ğ¹:** Ğ•ÑĞ»Ğ¸ Ğ½Ğ° ÑÑ‚Ğ¾Ğ»Ğµ **Ğ´Ğ²Ğ° Ğ”Ğ¶Ğ¾ĞºĞµÑ€Ğ° Ñ Ğ¾Ğ¿Ñ†Ğ¸ĞµĞ¹ "Ğ¡Ğ²ĞµÑ€Ñ…Ñƒ"** â†’ Ğ²Ğ·ÑÑ‚ĞºÑƒ Ğ±ĞµÑ€ĞµÑ‚ Ğ¸Ğ³Ñ€Ğ¾Ğº, Ğ±Ñ€Ğ¾ÑĞ¸Ğ²ÑˆĞ¸Ğ¹ Ğ”Ğ¶Ğ¾ĞºĞµÑ€Ğ° **Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¼**.

**ĞÑĞ¾Ğ±Ñ‹Ğ¹ ÑĞ»ÑƒÑ‡Ğ°Ğ¹:** Ğ•ÑĞ»Ğ¸ Ğ¿Ñ€Ğ¸ Ñ€Ğ°Ğ·Ğ´Ğ°Ñ‡Ğµ ĞºĞ¾Ğ·Ñ‹Ñ€ĞµĞ¼ Ğ²Ñ‹Ğ¿Ğ°Ğ» **Ğ”Ğ¶Ğ¾ĞºĞµÑ€** â†’ Ğ¸Ğ³Ñ€Ğ° Ğ¸Ğ´ĞµÑ‚ Ğ¿Ğ¾ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°Ğ¼ **"Ğ±ĞµĞ· ĞºĞ¾Ğ·Ñ‹Ñ€ĞµĞ¹"**.

### Ğ—Ğ°ĞºĞ°Ğ·Ñ‹ (Betting Phase)

#### ĞŸĞ¾Ñ€ÑĞ´Ğ¾Ğº Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ²
1. ĞŸĞµÑ€Ğ²Ñ‹Ğ¼ Ğ·Ğ°ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ¸Ğ³Ñ€Ğ¾Ğº **Ğ¿Ğ¾ Ñ‡Ğ°ÑĞ¾Ğ²Ğ¾Ğ¹ ÑÑ‚Ñ€ĞµĞ»ĞºĞµ** Ğ¾Ñ‚ Ñ€Ğ°Ğ·Ğ´Ğ°ÑÑ‰ĞµĞ³Ğ¾
2. ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¼ Ğ·Ğ°ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ **Ñ€Ğ°Ğ·Ğ´Ğ°ÑÑ‰Ğ¸Ğ¹**

#### ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ¾ "Ğ²Ñ‹Ğ½ÑƒĞ¶Ğ´ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾" (Forced Bet)
**ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ²Ğ°Ğ¶Ğ½Ğ¾:** Ğ¡ÑƒĞ¼Ğ¼Ğ° Ğ²ÑĞµÑ… Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ² **ĞĞ• Ğ”ĞĞ›Ğ–ĞĞ** Ñ€Ğ°Ğ²Ğ½ÑÑ‚ÑŒÑÑ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ñƒ ĞºĞ°Ñ€Ñ‚ Ğ² Ñ€Ğ°ÑƒĞ½Ğ´Ğµ.

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€:** Ğ Ğ°ÑƒĞ½Ğ´ Ğ½Ğ° 5 ĞºĞ°Ñ€Ñ‚ â†’ Ğ¼Ğ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ 5 Ğ²Ğ·ÑÑ‚Ğ¾Ğº.
- Ğ˜Ğ³Ñ€Ğ¾Ğº 1: Ğ·Ğ°ĞºĞ°Ğ·Ğ°Ğ» 2
- Ğ˜Ğ³Ñ€Ğ¾Ğº 2: Ğ·Ğ°ĞºĞ°Ğ·Ğ°Ğ» 1
- Ğ˜Ğ³Ñ€Ğ¾Ğº 3: Ğ·Ğ°ĞºĞ°Ğ·Ğ°Ğ» 1
- Ğ˜Ğ³Ñ€Ğ¾Ğº 4 (Ñ€Ğ°Ğ·Ğ´Ğ°ÑÑ‰Ğ¸Ğ¹): **ĞĞ• Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ·Ğ°ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ 1** (Ñ‚.Ğº. 2+1+1+1 = 5)
  - ĞœĞ¾Ğ¶ĞµÑ‚ Ğ·Ğ°ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ: 0, 2, 3, 4, 5
  - **ĞĞ• Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ·Ğ°ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ:** 1

**Ğ¢ĞµÑ€Ğ¼Ğ¸Ğ½Ñ‹:**
- **"ĞÑ‚Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ÑÑ"** â€” Ğ¾Ğ´Ğ½Ğ° Ğ¸Ğ»Ğ¸ Ğ±Ğ¾Ğ»ĞµĞµ Ğ²Ğ·ÑÑ‚Ğ¾Ğº Ğ±ÑƒĞ´ĞµÑ‚ Ğ½ĞµĞ´Ğ¾Ğ±Ñ€Ğ°Ğ½Ğ° (ĞºÑ‚Ğ¾-Ñ‚Ğ¾ Ğ²Ğ¾Ğ·ÑŒĞ¼ĞµÑ‚ Ğ¼ĞµĞ½ÑŒÑˆĞµ Ğ·Ğ°ĞºĞ°Ğ·Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾)
- **"ĞŸĞ¸Ñ…Ğ°ĞµÑ‚ÑÑ"** â€” Ğ»Ğ¸ÑˆĞ½Ğ¸Ğµ Ğ²Ğ·ÑÑ‚ĞºĞ¸, ĞºÑ‚Ğ¾-Ñ‚Ğ¾ Ğ²Ğ¾Ğ·ÑŒĞ¼ĞµÑ‚ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ Ğ·Ğ°ĞºĞ°Ğ·Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾

#### Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ² Ğ½Ğ° Ğ±ÑĞºĞµĞ½Ğ´Ğµ
```typescript
function validateBet(
  currentBets: number[],
  newBet: number,
  roundLength: number,
  isLastPlayer: boolean
): boolean {
  const sumBets = currentBets.reduce((a, b) => a + b, 0);
  
  if (isLastPlayer) {
    // ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ¸Ğ³Ñ€Ğ¾Ğº ĞĞ• Ğ¼Ğ¾Ğ¶ĞµÑ‚ ÑĞ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ·Ğ°ĞºĞ°Ğ·, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ ÑƒÑ€Ğ°Ğ²Ğ½ÑĞµÑ‚ ÑÑƒĞ¼Ğ¼Ñƒ
    return (sumBets + newBet) !== roundLength;
  }
  
  return newBet >= 0 && newBet <= roundLength;
}
```

### ĞŸĞ¾Ğ´ÑÑ‡ĞµÑ‚ Ğ¾Ñ‡ĞºĞ¾Ğ²

#### Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ¾Ñ‡ĞºĞ¾Ğ²

| Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ğµ | ĞÑ‡ĞºĞ¸ |
|---------|------|
| **Ğ’Ğ·ÑĞ» ÑĞ²Ğ¾Ñ‘** (bet === tricks) | `50 Ã— bet` Ğ¾Ñ‡ĞºĞ¾Ğ² |
| **Ğ’Ğ·ÑĞ» Ğ’Ğ¡Ğ** (bet === tricks === roundLength) | `100 Ã— roundLength` Ğ¾Ñ‡ĞºĞ¾Ğ² |
| **ĞĞµ Ğ²Ğ·ÑĞ» ÑĞ²Ğ¾Ñ‘** (bet â‰  tricks) | `10 Ã— tricks` Ğ¾Ñ‡ĞºĞ¾Ğ² |
| **"Ğ¨Ñ‚Ğ°Ğ½Ğ³Ğ°"** (bet â‰¥ 1, Ğ½Ğ¾ tricks = 0) | **-200 Ğ¾Ñ‡ĞºĞ¾Ğ²** (Ñ„Ğ¸ĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ ÑˆÑ‚Ñ€Ğ°Ñ„) |

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹:**
- Ğ—Ğ°ĞºĞ°Ğ·Ğ°Ğ» 3, Ğ²Ğ·ÑĞ» 3 (Ñ€Ğ°ÑƒĞ½Ğ´ Ğ½Ğ° 5 ĞºĞ°Ñ€Ñ‚): **150 Ğ¾Ñ‡ĞºĞ¾Ğ²** (50 Ã— 3)
- Ğ—Ğ°ĞºĞ°Ğ·Ğ°Ğ» 5, Ğ²Ğ·ÑĞ» 5 (Ñ€Ğ°ÑƒĞ½Ğ´ Ğ½Ğ° 5 ĞºĞ°Ñ€Ñ‚): **500 Ğ¾Ñ‡ĞºĞ¾Ğ²** (100 Ã— 5)
- Ğ—Ğ°ĞºĞ°Ğ·Ğ°Ğ» 2, Ğ²Ğ·ÑĞ» 4: **40 Ğ¾Ñ‡ĞºĞ¾Ğ²** (10 Ã— 4) â€” Ğ¿ĞµÑ€ĞµĞ±Ğ¾Ñ€
- Ğ—Ğ°ĞºĞ°Ğ·Ğ°Ğ» 3, Ğ²Ğ·ÑĞ» 1: **10 Ğ¾Ñ‡ĞºĞ¾Ğ²** (10 Ã— 1) â€” Ğ½ĞµĞ´Ğ¾Ğ±Ğ¾Ñ€
- Ğ—Ğ°ĞºĞ°Ğ·Ğ°Ğ» 2, Ğ²Ğ·ÑĞ» 0: **-200 Ğ¾Ñ‡ĞºĞ¾Ğ²** â€” Ğ¨Ğ¢ĞĞĞ“Ğ!

#### ĞŸÑ€ĞµĞ¼Ğ¸Ğ¸ (Bonus) Ğ² ĞºĞ¾Ğ½Ñ†Ğµ "ĞŸÑƒĞ»ÑŒĞºĞ¸"

ĞŸĞ¾ÑĞ»Ğµ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ "Ğ¿ÑƒĞ»ÑŒĞºĞ¸" (Ğ±Ğ»Ğ¾ĞºĞ° Ñ€Ğ°Ğ·Ğ´Ğ°Ñ‡) Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ¿Ğ¾Ğ´ÑÑ‡ĞµÑ‚ Ğ¿Ñ€ĞµĞ¼Ğ¸Ğ¹.

**Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ Ğ¿Ñ€ĞµĞ¼Ğ¸Ğ¸:**
Ğ˜Ğ³Ñ€Ğ¾Ğº **ĞĞ˜ Ğ ĞĞ—Ğ£** Ğ½Ğµ "Ğ¸ÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ğ»ÑÑ" Ğ² Ñ‚ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ²ÑĞµĞ¹ Ğ¿ÑƒĞ»ÑŒĞºĞ¸ (Ñ‚.Ğµ. Ğ²ÑĞµĞ³Ğ´Ğ° Ğ±Ñ€Ğ°Ğ» ÑĞ²Ğ¾Ñ‘: bet === tricks).

**ĞœĞµÑ…Ğ°Ğ½Ğ¸ĞºĞ° Ğ¿Ñ€ĞµĞ¼Ğ¸Ğ¸:**
1. Ğ˜Ğ³Ñ€Ğ¾Ğº, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ **Ğ±Ñ€Ğ°Ğ» ÑĞ²Ğ¾Ñ‘** Ğ²ÑĞµ Ñ€Ğ°ÑƒĞ½Ğ´Ñ‹ Ğ¿ÑƒĞ»ÑŒĞºĞ¸ â†’ Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ½Ğ° Ğ¿Ñ€ĞµĞ¼Ğ¸Ñ
2. Ğš ĞµĞ³Ğ¾ Ğ¾Ñ‡ĞºĞ°Ğ¼ **Ğ¿Ñ€Ğ¸Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚ÑÑ** ÑĞ°Ğ¼Ğ°Ñ Ğ±Ğ¾Ğ»ÑŒÑˆĞ°Ñ Ğ²Ğ·ÑÑ‚ĞºĞ° Ğ² Ğ¿ÑƒĞ»ÑŒĞºĞµ (ĞºÑ€Ğ¾Ğ¼Ğµ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ĞµĞ¹)
3. Ğ£ **ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ³Ğ¾ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° Ğ¿Ğ¾ Ñ‡Ğ°ÑĞ¾Ğ²Ğ¾Ğ¹ ÑÑ‚Ñ€ĞµĞ»ĞºĞµ** **ÑĞ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ÑÑ** ÑÑ‚Ğ° Ğ¶Ğµ ÑÑƒĞ¼Ğ¼Ğ°

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€:**
```
ĞŸÑƒĞ»ÑŒĞºĞ° 1 (Ñ€Ğ°ÑƒĞ½Ğ´Ñ‹ 1-8):
Ğ˜Ğ³Ñ€Ğ¾Ğº 1: Ğ²ÑĞµĞ³Ğ´Ğ° Ğ±Ñ€Ğ°Ğ» ÑĞ²Ğ¾Ñ‘ â†’ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ¿Ñ€ĞµĞ¼Ğ¸Ñ
Ğ’Ñ‹ÑÑˆĞ°Ñ Ğ²Ğ·ÑÑ‚ĞºĞ° Ğ² Ğ¿ÑƒĞ»ÑŒĞºĞµ (ĞºÑ€Ğ¾Ğ¼Ğµ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ĞµĞ¹): 300 Ğ¾Ñ‡ĞºĞ¾Ğ²

Ğ˜Ğ³Ñ€Ğ¾Ğº 1: +300 Ğ¾Ñ‡ĞºĞ¾Ğ²
Ğ˜Ğ³Ñ€Ğ¾Ğº 2 (ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ğ¿Ğ¾ Ñ‡Ğ°ÑĞ¾Ğ²Ğ¾Ğ¹): -300 Ğ¾Ñ‡ĞºĞ¾Ğ²
```

**Ğ¡Ğ¿Ğ¾Ñ€Ğ½Ñ‹Ğµ ÑĞ¸Ñ‚ÑƒĞ°Ñ†Ğ¸Ğ¸:**

Ğ•ÑĞ»Ğ¸ **Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ² Ñ€ÑĞ´Ğ¾Ğ¼** (Ğ¿Ğ¾ Ñ‡Ğ°ÑĞ¾Ğ²Ğ¾Ğ¹ ÑÑ‚Ñ€ĞµĞ»ĞºĞµ) Ğ²Ñ‹ÑˆĞ»Ğ¸ Ğ½Ğ° Ğ¿Ñ€ĞµĞ¼Ğ¸Ñ:

**ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ¾:**
- Ğ˜Ğ³Ñ€Ğ¾Ğº **Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚** Ğ¿Ñ€ĞµĞ¼Ğ¸Ñ, Ğ½Ğ¾ **ĞĞ• ÑĞ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚** ÑĞ¾ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ³Ğ¾, ĞµÑĞ»Ğ¸ ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ñ‚Ğ¾Ğ¶Ğµ Ğ½Ğ° Ğ¿Ñ€ĞµĞ¼Ğ¸Ğ¸
- Ğ˜Ğ³Ñ€Ğ¾Ğº **ĞĞ• Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚** Ğ¿Ñ€ĞµĞ¼Ğ¸Ñ Ğ¾Ñ‚ Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰ĞµĞ³Ğ¾, ĞµÑĞ»Ğ¸ Ñ‚Ğ¾Ñ‚ Ğ¿Ñ‹Ñ‚Ğ°Ğ»ÑÑ ÑĞ¿Ğ¸ÑĞ°Ñ‚ÑŒ, Ğ½Ğ¾ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ğ½Ğ° Ğ¿Ñ€ĞµĞ¼Ğ¸Ğ¸
- Ğ˜Ğ³Ñ€Ğ¾Ğº **ÑĞ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚** Ñƒ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ³Ğ¾, ĞµÑĞ»Ğ¸ ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ **ĞĞ• Ğ½Ğ° Ğ¿Ñ€ĞµĞ¼Ğ¸Ğ¸**

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€:** 3 Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° Ğ¿Ğ¾Ğ´Ñ€ÑĞ´ Ğ½Ğ° Ğ¿Ñ€ĞµĞ¼Ğ¸Ğ¸ (Ğ˜Ğ³Ñ€Ğ¾Ğº 1, 2, 3):
```
Ğ˜Ğ³Ñ€Ğ¾Ğº 1: +300 (Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚), Ğ½Ğ¾ ĞĞ• ÑĞ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ Ñ Ğ˜Ğ³Ñ€Ğ¾ĞºĞ° 2 (Ñ‚Ğ¾Ñ‚ Ğ½Ğ° Ğ¿Ñ€ĞµĞ¼Ğ¸Ğ¸)
Ğ˜Ğ³Ñ€Ğ¾Ğº 2: ĞĞ• Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ (Ğ˜Ğ³Ñ€Ğ¾Ğº 1 Ğ¿Ñ‹Ñ‚Ğ°Ğ»ÑÑ ÑĞ¿Ğ¸ÑĞ°Ñ‚ÑŒ, Ğ½Ğ¾ 2-Ğ¹ Ğ½Ğ° Ğ¿Ñ€ĞµĞ¼Ğ¸Ğ¸),
         ĞĞ• ÑĞ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ Ñ Ğ˜Ğ³Ñ€Ğ¾ĞºĞ° 3 (Ñ‚Ğ¾Ñ‚ Ğ½Ğ° Ğ¿Ñ€ĞµĞ¼Ğ¸Ğ¸)
Ğ˜Ğ³Ñ€Ğ¾Ğº 3: ĞĞ• Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ (Ğ˜Ğ³Ñ€Ğ¾Ğº 2 Ğ¿Ñ‹Ñ‚Ğ°Ğ»ÑÑ ÑĞ¿Ğ¸ÑĞ°Ñ‚ÑŒ, Ğ½Ğ¾ 3-Ğ¹ Ğ½Ğ° Ğ¿Ñ€ĞµĞ¼Ğ¸Ğ¸),
         Ğ¡ĞŸĞ˜Ğ¡Ğ«Ğ’ĞĞ•Ğ¢ Ñ Ğ˜Ğ³Ñ€Ğ¾ĞºĞ° 4 (Ñ‚Ğ¾Ñ‚ ĞĞ• Ğ½Ğ° Ğ¿Ñ€ĞµĞ¼Ğ¸Ğ¸): Ğ˜Ğ³Ñ€Ğ¾Ğº 4: -300
```

**Ğ’Ğ°Ğ¶Ğ½Ğ¾:** Ğ˜Ğ³Ñ€Ğ¾ĞºĞ¸ 1 Ğ¸ 4 ÑÑ‡Ğ¸Ñ‚Ğ°ÑÑ‚ÑÑ **"Ñ€ÑĞ´Ğ¾Ğ¼"** (Ğ¿Ğ¾ Ñ‡Ğ°ÑĞ¾Ğ²Ğ¾Ğ¹ ÑÑ‚Ñ€ĞµĞ»ĞºĞµ Ğ·Ğ°Ğ¼Ñ‹ĞºĞ°ĞµÑ‚ÑÑ ĞºÑ€ÑƒĞ³).

#### "Ğ˜ÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ğ»ÑÑ" (Spoiled)

Ğ•ÑĞ»Ğ¸ Ğ¸Ğ³Ñ€Ğ¾Ğº Ñ…Ğ¾Ñ‚Ñ Ğ±Ñ‹ Ğ¾Ğ´Ğ¸Ğ½ Ñ€Ğ°Ğ· **Ğ½Ğµ Ğ²Ğ·ÑĞ» ÑĞ²Ğ¾Ñ‘** (bet â‰  tricks):
- ĞŸĞ¾Ğ¼ĞµÑ‡Ğ°ĞµÑ‚ÑÑ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ¼ **X** Ğ² "Ğ»Ğ¸ÑÑ‚Ğµ ÑÑ‡ĞµÑ‚Ğ°"
- **ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ñ‚ĞµÑ€ÑĞµÑ‚ Ğ¿Ñ€Ğ°Ğ²Ğ¾ Ğ½Ğ° Ğ¿Ñ€ĞµĞ¼Ğ¸Ñ** Ğ² ÑÑ‚Ğ¾Ğ¹ Ğ¿ÑƒĞ»ÑŒĞºĞµ
- Ğ”Ğ°Ğ¶Ğµ ĞµÑĞ»Ğ¸ Ğ¿Ğ¾Ñ‚Ğ¾Ğ¼ ÑĞ½Ğ¾Ğ²Ğ° Ğ±ÑƒĞ´ĞµÑ‚ Ğ±Ñ€Ğ°Ñ‚ÑŒ ÑĞ²Ğ¾Ñ‘ â€” Ğ¿Ñ€ĞµĞ¼Ğ¸Ğ¸ ÑƒĞ¶Ğµ Ğ½Ğµ Ğ±ÑƒĞ´ĞµÑ‚

#### ĞÑ‚Ğ¼ĞµÑ‚ĞºĞ¸ Ğ² "Ğ»Ğ¸ÑÑ‚Ğµ ÑÑ‡ĞµÑ‚Ğ°"

- **X** â€” Ğ¸Ğ³Ñ€Ğ¾Ğº "Ğ¸ÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ğ»ÑÑ" (Ğ½Ğµ Ğ²Ğ·ÑĞ» ÑĞ²Ğ¾Ñ‘ Ñ…Ğ¾Ñ‚Ñ Ğ±Ñ‹ Ğ¾Ğ´Ğ¸Ğ½ Ñ€Ğ°Ğ·)
- **â—** (Ğ¶Ğ¸Ñ€Ğ½Ğ°Ñ Ñ‚Ğ¾Ñ‡ĞºĞ°) â€” Ñƒ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° Ğ±Ñ‹Ğ» Ğ”Ğ¶Ğ¾ĞºĞµÑ€ Ğ² ÑÑ‚Ğ¾Ğ¹ Ñ€Ğ°Ğ·Ğ´Ğ°Ñ‡Ğµ
- **Ğ¡Ğ¿ĞµÑ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»** â€” Ğ²Ğ·ÑÑ‚ĞºĞ°, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ Ğ±ÑƒĞ´ĞµÑ‚ Ğ¿Ñ€Ğ¸Ğ¿Ğ»ÑÑĞ¾Ğ²Ğ°Ğ½Ğ° Ğ¿Ñ€Ğ¸ Ğ¿Ñ€ĞµĞ¼Ğ¸Ğ¸

### ĞĞ°Ñ‡Ğ°Ğ»Ğ¾ Ğ¸Ğ³Ñ€Ñ‹ ("Ğ¢ÑƒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ")

**ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ³Ğ¾ Ñ€Ğ°Ğ·Ğ´Ğ°ÑÑ‰ĞµĞ³Ğ¾:**
1. ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ²Ñ‹ĞºĞ»Ğ°Ğ´Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ¿Ğ¾ Ğ¾Ğ´Ğ½Ğ¾Ğ¹ ĞºĞ°Ñ€Ñ‚Ğµ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼Ñƒ Ğ¸Ğ³Ñ€Ğ¾ĞºÑƒ Ğ¿Ğ¾ ĞºÑ€ÑƒĞ³Ñƒ
2. Ğ˜Ğ³Ñ€Ğ¾Ğº, Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ²ÑˆĞ¸Ğ¹ **Ğ¿ĞµÑ€Ğ²Ğ¾Ğ³Ğ¾ Ğ¢ÑƒĞ·Ğ°** â†’ ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑÑ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¼ Ñ€Ğ°Ğ·Ğ´Ğ°ÑÑ‰Ğ¸Ğ¼
3. Ğ­Ñ‚Ğ¾Ñ‚ Ğ¸Ğ³Ñ€Ğ¾Ğº Ğ¿Ğ¾Ğ¼ĞµÑ‰Ğ°ĞµÑ‚ÑÑ **4-Ğ¼ Ğ² "Ğ›Ğ¸ÑÑ‚Ğµ ÑÑ‡ĞµÑ‚Ğ°"** (Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¼)
4. ĞÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¸ Ğ¿Ğ¾ Ñ‡Ğ°ÑĞ¾Ğ²Ğ¾Ğ¹ ÑÑ‚Ñ€ĞµĞ»ĞºĞµ: 1-Ğ¹, 2-Ğ¹, 3-Ğ¹

**ĞÑ‡ĞµÑ€ĞµĞ´Ğ½Ğ¾ÑÑ‚ÑŒ Ñ€Ğ°Ğ·Ğ´Ğ°ÑÑ‰Ğ¸Ñ…:**
- Ğ Ğ°Ğ·Ğ´Ğ°ÑÑ‰Ğ¸Ğµ Ğ¼ĞµĞ½ÑÑÑ‚ÑÑ **Ğ¿Ğ¾ Ñ‡Ğ°ÑĞ¾Ğ²Ğ¾Ğ¹ ÑÑ‚Ñ€ĞµĞ»ĞºĞµ** ĞºĞ°Ğ¶Ğ´ÑƒÑ Ñ€Ğ°Ğ·Ğ´Ğ°Ñ‡Ñƒ
- ĞÑ‡ĞµÑ€ĞµĞ´Ğ½Ğ¾ÑÑ‚ÑŒ **ĞĞ• Ğ¼ĞµĞ½ÑĞµÑ‚ÑÑ** Ğ´Ğ¾ ĞºĞ¾Ğ½Ñ†Ğ° Ğ¸Ğ³Ñ€Ñ‹

### ĞŸĞ¾Ñ€ÑĞ´Ğ¾Ğº Ñ…Ğ¾Ğ´Ğ°

1. **ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ Ñ…Ğ¾Ğ´ Ğ² Ñ€Ğ°ÑƒĞ½Ğ´Ğµ** Ğ´ĞµĞ»Ğ°ĞµÑ‚ Ğ¸Ğ³Ñ€Ğ¾Ğº **Ğ¿Ğ¾ Ñ‡Ğ°ÑĞ¾Ğ²Ğ¾Ğ¹ ÑÑ‚Ñ€ĞµĞ»ĞºĞµ Ğ¾Ñ‚ Ñ€Ğ°Ğ·Ğ´Ğ°ÑÑ‰ĞµĞ³Ğ¾**
2. **Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ñ…Ğ¾Ğ´** Ğ´ĞµĞ»Ğ°ĞµÑ‚ Ğ¸Ğ³Ñ€Ğ¾Ğº, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ **Ğ²Ğ·ÑĞ» Ğ²Ğ·ÑÑ‚ĞºÑƒ**
3. ĞšĞ¾Ğ³Ğ´Ğ° Ğ²ÑĞµ 4 Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° Ğ¿Ğ¾Ñ…Ğ¾Ğ´Ğ¸Ğ»Ğ¸ â†’ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚ÑÑ Ğ¿Ğ¾Ğ±ĞµĞ´Ğ¸Ñ‚ĞµĞ»ÑŒ Ğ²Ğ·ÑÑ‚ĞºĞ¸
4. ĞŸĞ¾Ğ±ĞµĞ´Ğ¸Ñ‚ĞµĞ»ÑŒ Ğ²Ğ·ÑÑ‚ĞºĞ¸ Ñ…Ğ¾Ğ´Ğ¸Ñ‚ ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¼

---

## ğŸ”§ Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

### 1. Game Core (Ğ”Ğ²Ğ¸Ğ¶Ğ¾Ğº Ğ¸Ğ³Ñ€Ñ‹)

#### 1.1 ĞœĞ¾Ğ´ĞµĞ»Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (TypeScript Interfaces)

```typescript
// Enums
enum Suit {
  Hearts = 'hearts',
  Diamonds = 'diamonds',
  Clubs = 'clubs',
  Spades = 'spades'
}

enum Rank {
  Six = 6,
  Seven = 7,
  Eight = 8,
  Nine = 9,
  Ten = 10,
  Jack = 11,
  Queen = 12,
  King = 13,
  Ace = 14
}

enum GamePhase {
  Waiting = 'waiting',      // ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ²
  Betting = 'betting',      // Ğ¤Ğ°Ğ·Ğ° Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ²
  Playing = 'playing',      // Ğ¤Ğ°Ğ·Ğ° Ğ¸Ğ³Ñ€Ñ‹ (Ñ…Ğ¾Ğ´Ñ‹)
  Scoring = 'scoring',      // ĞŸĞ¾Ğ´ÑÑ‡ĞµÑ‚ Ğ¾Ñ‡ĞºĞ¾Ğ²
  Finished = 'finished'     // Ğ˜Ğ³Ñ€Ğ° Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ°
}

enum JokerOption {
  High = 'high',           // Ğ’Ñ‹ÑÑˆĞ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° Ğ¼Ğ°ÑÑ‚Ğ¸
  Low = 'low',             // ĞœĞ»Ğ°Ğ´ÑˆĞ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° Ğ¼Ğ°ÑÑ‚Ğ¸
  Top = 'top',             // Ğ¡Ğ²ĞµÑ€Ñ…Ñƒ (Ğ±ÑŒĞµÑ‚)
  Bottom = 'bottom'        // Ğ¡Ğ½Ğ¸Ğ·Ñƒ (Ğ½Ğµ Ğ±ÑŒĞµÑ‚)
}

// Card Model
type Card = 
  | { type: 'standard'; suit: Suit; rank: Rank; id: string }
  | { type: 'joker'; id: string; jokerId: 1 | 2 };

// Player Model
interface Player {
  id: string;                    // User ID (Telegram ID Ğ¸Ğ»Ğ¸ bot-{N})
  name: string;
  isBot: boolean;
  socketId?: string;             // Socket.io client ID
  connected: boolean;
  
  // Ğ˜Ğ³Ñ€Ğ¾Ğ²Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ
  hand: Card[];                  // ĞšĞ°Ñ€Ñ‚Ñ‹ Ğ½Ğ° Ñ€ÑƒĞºĞµ
  bet: number | null;            // Ğ—Ğ°ĞºĞ°Ğ· (null = ĞµÑ‰Ğµ Ğ½Ğµ ÑĞ´ĞµĞ»Ğ°Ğ½)
  tricks: number;                // ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ²Ğ·ÑÑ‚Ñ‹Ñ… Ğ²Ğ·ÑÑ‚Ğ¾Ğº
  
  // ĞÑ‡ĞºĞ¸
  roundScores: number[];         // ĞÑ‡ĞºĞ¸ Ğ·Ğ° ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ€Ğ°ÑƒĞ½Ğ´
  pulkaScores: number[];         // ĞÑ‡ĞºĞ¸ Ğ·Ğ° ĞºĞ°Ğ¶Ğ´ÑƒÑ Ğ¿ÑƒĞ»ÑŒĞºÑƒ
  totalScore: number;            // ĞĞ±Ñ‰Ğ°Ñ ÑÑƒĞ¼Ğ¼Ğ° Ğ¾Ñ‡ĞºĞ¾Ğ²
  
  // ĞœĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
  spoiled: boolean;              // Ğ˜ÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ğ»ÑÑ Ğ² Ñ‚ĞµĞºÑƒÑ‰ĞµĞ¹ Ğ¿ÑƒĞ»ÑŒĞºĞµ
  hadJokerInRounds: boolean[];   // Ğ‘Ñ‹Ğ» Ğ»Ğ¸ Ğ´Ğ¶Ğ¾ĞºĞµÑ€ Ğ² ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼ Ñ€Ğ°ÑƒĞ½Ğ´Ğµ
}

// Game State
interface GameState {
  id: string;                    // UUID Ğ¸Ğ³Ñ€Ñ‹
  
  // Ğ˜Ğ³Ñ€Ğ¾ĞºĞ¸
  players: Player[];             // Ğ’ÑĞµĞ³Ğ´Ğ° 4 Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°
  dealerIndex: number;           // Ğ˜Ğ½Ğ´ĞµĞºÑ Ñ€Ğ°Ğ·Ğ´Ğ°ÑÑ‰ĞµĞ³Ğ¾ (0-3)
  currentPlayerIndex: number;    // Ğ§ĞµĞ¹ ÑĞµĞ¹Ñ‡Ğ°Ñ Ñ…Ğ¾Ğ´
  
  // Ğ Ğ°ÑƒĞ½Ğ´
  round: number;                 // 1..24
  pulka: number;                 // 1..4
  phase: GamePhase;
  
  // ĞšĞ°Ñ€Ñ‚Ñ‹
  trump: Suit | null;            // ĞšĞ¾Ğ·Ñ‹Ñ€Ğ½Ğ°Ñ Ğ¼Ğ°ÑÑ‚ÑŒ (null = Ğ±ĞµĞ· ĞºĞ¾Ğ·Ñ‹Ñ€ĞµĞ¹)
  table: TableCard[];            // ĞšĞ°Ñ€Ñ‚Ñ‹ Ğ½Ğ° ÑÑ‚Ğ¾Ğ»Ğµ (0-4)
  
  // Ğ¢Ğ°Ğ¹Ğ¼Ğ¸Ğ½Ğ³
  turnStartedAt: number;         // Timestamp Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ñ…Ğ¾Ğ´Ğ°
  turnTimeoutMs: number;         // 30000 (30 ÑĞµĞº)
  
  // Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ
  history: RoundHistory[];       // Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ²ÑĞµÑ… Ñ€Ğ°ÑƒĞ½Ğ´Ğ¾Ğ²
  
  // ĞœĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
  createdAt: number;
  finishedAt: number | null;
  winnerId: string | null;
}

interface TableCard {
  card: Card;
  playerId: string;
  jokerOption?: JokerOption;     // Ğ•ÑĞ»Ğ¸ ÑÑ‚Ğ¾ Ğ”Ğ¶Ğ¾ĞºĞµÑ€
  requiredSuit?: Suit;           // Ğ•ÑĞ»Ğ¸ Ğ”Ğ¶Ğ¾ĞºĞµÑ€ High/Low
}

interface RoundHistory {
  round: number;
  trump: Suit | null;
  bets: { [playerId: string]: number };
  tricks: { [playerId: string]: number };
  scores: { [playerId: string]: number };
  tableHistory: TableCard[][];   // Ğ’ÑĞµ Ğ²Ğ·ÑÑ‚ĞºĞ¸ Ñ€Ğ°ÑƒĞ½Ğ´Ğ°
}
```

#### 1.2 State Machine (ĞœĞ°ÑˆĞ¸Ğ½Ğ° ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğ¹)

**ĞŸĞµÑ€ĞµÑ…Ğ¾Ğ´Ñ‹ Ğ¼ĞµĞ¶Ğ´Ñƒ Ñ„Ğ°Ğ·Ğ°Ğ¼Ğ¸:**

```
Waiting â†’ Betting â†’ Playing â†’ Scoring â†’ 
  â†‘                                    â†“
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (ĞµÑĞ»Ğ¸ round < 24) â”€â”€â”€â”€â”˜
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (ĞµÑĞ»Ğ¸ round = 24) â†’ Finished
```

**Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ¾Ğ²:**

```typescript
class StateMachine {
  transition(state: GameState, event: GameEvent): GameState {
    switch (state.phase) {
      case GamePhase.Waiting:
        if (event.type === 'ALL_PLAYERS_READY') {
          return this.startBetting(state);
        }
        break;
        
      case GamePhase.Betting:
        if (event.type === 'ALL_BETS_PLACED') {
          return this.startPlaying(state);
        }
        break;
        
      case GamePhase.Playing:
        if (event.type === 'ROUND_COMPLETE') {
          return this.startScoring(state);
        }
        break;
        
      case GamePhase.Scoring:
        if (state.round < 24) {
          return this.nextRound(state);
        } else {
          return this.finishGame(state);
        }
        break;
    }
    return state;
  }
}
```

#### 1.3 Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»

##### Move Validator (Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ñ…Ğ¾Ğ´Ğ¾Ğ²)

```typescript
class MoveValidator {
  /**
   * ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚, Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ»Ğ¸ Ğ¸Ğ³Ñ€Ğ¾Ğº Ğ¿Ğ¾Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ğ¾Ğ¹ ĞºĞ°Ñ€Ñ‚Ğ¾Ğ¹
   */
  validate(
    player: Player,
    card: Card,
    table: TableCard[],
    trump: Suit | null
  ): ValidationResult {
    // 1. Ğ”Ğ¶Ğ¾ĞºĞµÑ€ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¸Ğ³Ñ€Ğ°Ñ‚ÑŒ Ğ²ÑĞµĞ³Ğ´Ğ°
    if (card.type === 'joker') {
      return { valid: true };
    }
    
    // 2. Ğ•ÑĞ»Ğ¸ ÑÑ‚Ğ¾Ğ» Ğ¿ÑƒÑÑ‚Ğ¾Ğ¹ â†’ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑŒ Ğ»ÑĞ±Ğ¾Ğ¹ ĞºĞ°Ñ€Ñ‚Ğ¾Ğ¹
    if (table.length === 0) {
      return { valid: true };
    }
    
    // 3. ĞĞ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ÑŒ Ñ‚Ñ€ĞµĞ±ÑƒĞµĞ¼ÑƒÑ Ğ¼Ğ°ÑÑ‚ÑŒ (Ğ¿ĞµÑ€Ğ²Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° Ğ½Ğ° ÑÑ‚Ğ¾Ğ»Ğµ)
    const leadSuit = this.getLeadSuit(table[0]);
    
    // 4. Ğ•ÑÑ‚ÑŒ Ğ»Ğ¸ Ñƒ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° ĞºĞ°Ñ€Ñ‚Ñ‹ Ñ‚Ñ€ĞµĞ±ÑƒĞµĞ¼Ğ¾Ğ¹ Ğ¼Ğ°ÑÑ‚Ğ¸?
    const hasSuit = this.hasCardOfSuit(player.hand, leadSuit);
    
    if (hasSuit) {
      // ĞĞ‘Ğ¯Ğ—ĞĞ Ğ¸Ğ³Ñ€Ğ°Ñ‚ÑŒ Ğ² Ğ¼Ğ°ÑÑ‚ÑŒ
      if (card.suit !== leadSuit) {
        return { 
          valid: false, 
          reason: 'MUST_FOLLOW_SUIT',
          requiredSuit: leadSuit 
        };
      }
      return { valid: true };
    }
    
    // 5. ĞĞµÑ‚ Ğ¼Ğ°ÑÑ‚Ğ¸ â†’ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ·Ñ‹Ñ€ÑŒ
    const hasTrump = trump && this.hasCardOfSuit(player.hand, trump);
    
    if (hasTrump) {
      // ĞĞ‘Ğ¯Ğ—ĞĞ Ğ¸Ğ³Ñ€Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ·Ñ‹Ñ€ÑŒ
      if (card.suit !== trump) {
        return { 
          valid: false, 
          reason: 'MUST_PLAY_TRUMP',
          requiredSuit: trump 
        };
      }
      return { valid: true };
    }
    
    // 6. ĞĞµÑ‚ Ğ¼Ğ°ÑÑ‚Ğ¸ Ğ¸ ĞºĞ¾Ğ·Ñ‹Ñ€Ñ â†’ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¸Ğ³Ñ€Ğ°Ñ‚ÑŒ Ğ»ÑĞ±ÑƒÑ ĞºĞ°Ñ€Ñ‚Ñƒ
    return { valid: true };
  }
  
  /**
   * Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ñ…Ğ¾Ğ´Ğ° Ğ”Ğ¶Ğ¾ĞºĞµÑ€Ğ¾Ğ¼ Ñ Ğ¾Ğ¿Ñ†Ğ¸ĞµĞ¹ "High" (Ğ²Ñ‹ÑÑˆĞ°Ñ ĞºĞ°Ñ€Ñ‚Ğ°)
   */
  validateJokerHigh(
    player: Player,
    requiredSuit: Suit
  ): Card {
    const cardsOfSuit = player.hand.filter(
      c => c.type === 'standard' && c.suit === requiredSuit
    );
    
    if (cardsOfSuit.length === 0) {
      throw new Error('NO_CARDS_OF_SUIT');
    }
    
    // ĞĞ°Ğ¹Ñ‚Ğ¸ ÑĞ°Ğ¼ÑƒÑ Ğ²Ñ‹ÑÑˆÑƒÑ ĞºĞ°Ñ€Ñ‚Ñƒ Ğ¼Ğ°ÑÑ‚Ğ¸
    const highestCard = cardsOfSuit.reduce((highest, card) => {
      return card.rank > highest.rank ? card : highest;
    });
    
    return highestCard;
  }
}
```

##### Bet Validator (Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ²)

```typescript
class BetValidator {
  /**
   * ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ Ğ·Ğ°ĞºĞ°Ğ·Ğ°
   * 
   * ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ¾ "Ğ²Ñ‹Ğ½ÑƒĞ¶Ğ´ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾": ÑÑƒĞ¼Ğ¼Ğ° Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ² ĞĞ• Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ° Ñ€Ğ°Ğ²Ğ½ÑÑ‚ÑŒÑÑ Ğ´Ğ»Ğ¸Ğ½Ğµ Ñ€Ğ°ÑƒĞ½Ğ´Ğ°
   */
  validate(
    currentBets: (number | null)[],
    newBet: number,
    roundLength: number,
    playerIndex: number,
    dealerIndex: number
  ): ValidationResult {
    // 1. Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ
    if (newBet < 0 || newBet > roundLength) {
      return { valid: false, reason: 'BET_OUT_OF_RANGE' };
    }
    
    // 2. ĞŸĞ¾Ğ´ÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ ÑÑƒĞ¼Ğ¼Ñƒ ÑƒĞ¶Ğµ ÑĞ´ĞµĞ»Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ²
    const sumBets = currentBets
      .filter(bet => bet !== null)
      .reduce((sum, bet) => sum + bet, 0);
    
    // 3. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ¾ "Ğ²Ñ‹Ğ½ÑƒĞ¶Ğ´ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾"
    const isLastPlayer = (playerIndex === dealerIndex);
    
    if (isLastPlayer) {
      // ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ¸Ğ³Ñ€Ğ¾Ğº ĞĞ• Ğ¼Ğ¾Ğ¶ĞµÑ‚ ÑƒÑ€Ğ°Ğ²Ğ½ÑÑ‚ÑŒ ÑÑƒĞ¼Ğ¼Ñƒ
      if (sumBets + newBet === roundLength) {
        return { 
          valid: false, 
          reason: 'FORBIDDEN_BET',
          message: 'Ğ¡ÑƒĞ¼Ğ¼Ğ° Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ² Ğ½Ğµ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ñ€Ğ°Ğ²Ğ½ÑÑ‚ÑŒÑÑ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ñƒ Ğ²Ğ·ÑÑ‚Ğ¾Ğº'
        };
      }
    }
    
    return { valid: true };
  }
}
```

#### 1.4 Scoring Engine (ĞŸĞ¾Ğ´ÑÑ‡ĞµÑ‚ Ğ¾Ñ‡ĞºĞ¾Ğ²)

```typescript
class ScoringService {
  /**
   * ĞŸĞ¾Ğ´ÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ¾Ñ‡ĞºĞ¸ Ğ·Ğ° Ñ€Ğ°ÑƒĞ½Ğ´ Ğ´Ğ»Ñ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°
   */
  calculateRoundScore(
    player: Player,
    roundLength: number
  ): number {
    const { bet, tricks } = player;
    
    // 1. Ğ˜Ğ³Ñ€Ğ¾Ğº Ğ²Ğ·ÑĞ» ÑĞ²Ğ¾Ñ‘
    if (bet === tricks) {
      // Ğ’Ğ·ÑĞ» Ğ’Ğ¡Ğ (Ğ²ÑĞµ Ğ²Ğ·ÑÑ‚ĞºĞ¸ Ğ² Ñ€Ğ°ÑƒĞ½Ğ´Ğµ)
      if (bet === roundLength) {
        return 100 * roundLength;
      }
      // Ğ’Ğ·ÑĞ» ÑĞ²Ğ¾Ñ‘ (ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ğ¾Ğµ)
      return 50 * bet;
    }
    
    // 2. "Ğ¨Ñ‚Ğ°Ğ½Ğ³Ğ°" (Ğ·Ğ°ĞºĞ°Ğ·Ğ°Ğ» 1+, Ğ½Ğ¾ Ğ²Ğ·ÑĞ» 0)
    if (bet >= 1 && tricks === 0) {
      return -200;  // Ğ¤Ğ¸ĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ ÑˆÑ‚Ñ€Ğ°Ñ„
    }
    
    // 3. ĞĞµ Ğ²Ğ·ÑĞ» ÑĞ²Ğ¾Ñ‘ (Ğ¿ĞµÑ€ĞµĞ±Ğ¾Ñ€ Ğ¸Ğ»Ğ¸ Ğ½ĞµĞ´Ğ¾Ğ±Ğ¾Ñ€)
    return 10 * tricks;
  }
  
  /**
   * ĞŸĞ¾Ğ´ÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ¿Ñ€ĞµĞ¼Ğ¸Ğ¸ Ğ² ĞºĞ¾Ğ½Ñ†Ğµ "Ğ¿ÑƒĞ»ÑŒĞºĞ¸"
   */
  calculatePulkaPremiums(
    players: Player[],
    pulkaHistory: RoundHistory[]
  ): PremiumResult[] {
    const results: PremiumResult[] = [];
    
    // 1. ĞĞ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ÑŒ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ², ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ "Ğ½Ğµ Ğ¸ÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ğ»Ğ¸ÑÑŒ"
    const cleanPlayers = players.filter(p => !p.spoiled);
    
    if (cleanPlayers.length === 0) {
      return results;  // ĞĞ¸ĞºÑ‚Ğ¾ Ğ½Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ¿Ñ€ĞµĞ¼Ğ¸Ñ
    }
    
    // 2. ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ²Ñ‹ÑÑˆÑƒÑ Ğ²Ğ·ÑÑ‚ĞºÑƒ Ğ² Ğ¿ÑƒĞ»ÑŒĞºĞµ (ĞºÑ€Ğ¾Ğ¼Ğµ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ĞµĞ¹)
    const highestTrick = this.getHighestTrickScore(
      pulkaHistory.slice(0, -1)  // Ğ’ÑĞµ Ñ€Ğ°ÑƒĞ½Ğ´Ñ‹ ĞºÑ€Ğ¾Ğ¼Ğµ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ĞµĞ³Ğ¾
    );
    
    // 3. ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¿Ñ€ĞµĞ¼Ğ¸Ğ¸
    cleanPlayers.forEach((player, idx) => {
      const playerIndex = players.indexOf(player);
      const nextPlayerIndex = (playerIndex + 1) % players.length;
      const nextPlayer = players[nextPlayerIndex];
      
      // Ğ˜Ğ³Ñ€Ğ¾Ğº Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ¿Ñ€ĞµĞ¼Ğ¸Ñ
      const received = highestTrick;
      
      // Ğ¡Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ñƒ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ³Ğ¾, ĞµÑĞ»Ğ¸ Ñ‚Ğ¾Ñ‚ ĞĞ• Ğ½Ğ° Ğ¿Ñ€ĞµĞ¼Ğ¸Ğ¸
      let takenFrom: string | null = null;
      if (nextPlayer.spoiled) {
        takenFrom = nextPlayer.id;
        nextPlayer.totalScore -= highestTrick;
      }
      
      player.totalScore += received;
      
      results.push({
        playerId: player.id,
        received,
        takenFrom
      });
    });
    
    return results;
  }
  
  /**
   * ĞĞ°Ğ¹Ñ‚Ğ¸ ÑĞ°Ğ¼ÑƒÑ Ğ²Ñ‹ÑĞ¾ĞºÑƒÑ Ğ²Ğ·ÑÑ‚ĞºÑƒ Ğ² Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸ Ñ€Ğ°ÑƒĞ½Ğ´Ğ¾Ğ²
   */
  private getHighestTrickScore(history: RoundHistory[]): number {
    let highest = 0;
    
    history.forEach(round => {
      Object.values(round.scores).forEach(score => {
        if (score > highest) {
          highest = score;
        }
      });
    });
    
    return highest;
  }
}
```

#### 1.5 Deck Service (Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ»Ğ¾Ğ´Ğ¾Ğ¹)

```typescript
class DeckService {
  /**
   * Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ»Ğ¾Ğ´Ñƒ Ğ¸Ğ· 36 ĞºĞ°Ñ€Ñ‚ (34 ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ñ‹Ğµ + 2 Ğ´Ğ¶Ğ¾ĞºĞµÑ€Ğ°)
   */
  createDeck(): Card[] {
    const deck: Card[] = [];
    
    // 1. Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ñ‹Ğµ ĞºĞ°Ñ€Ñ‚Ñ‹
    const suits = [Suit.Hearts, Suit.Diamonds, Suit.Clubs, Suit.Spades];
    const ranks = [
      Rank.Six, Rank.Seven, Rank.Eight, Rank.Nine, Rank.Ten,
      Rank.Jack, Rank.Queen, Rank.King, Rank.Ace
    ];
    
    suits.forEach(suit => {
      ranks.forEach(rank => {
        // Ğ˜ÑĞºĞ»ÑÑ‡Ğ°ĞµĞ¼ Ñ‡ĞµÑ€Ğ½Ñ‹Ğµ ÑˆĞµÑÑ‚ĞµÑ€ĞºĞ¸
        if (rank === Rank.Six && (suit === Suit.Clubs || suit === Suit.Spades)) {
          return;
        }
        
        deck.push({
          type: 'standard',
          suit,
          rank,
          id: `${suit}-${rank}`
        });
      });
    });
    
    // 2. Ğ”Ğ¶Ğ¾ĞºĞµÑ€Ñ‹
    deck.push({ type: 'joker', id: 'joker-1', jokerId: 1 });
    deck.push({ type: 'joker', id: 'joker-2', jokerId: 2 });
    
    return deck;
  }
  
  /**
   * ĞŸĞµÑ€ĞµĞ¼ĞµÑˆĞ°Ñ‚ÑŒ ĞºĞ¾Ğ»Ğ¾Ğ´Ñƒ (Fisher-Yates shuffle)
   */
  shuffle(deck: Card[]): Card[] {
    const shuffled = [...deck];
    
    for (let i = shuffled.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
    }
    
    return shuffled;
  }
  
  /**
   * Ğ Ğ°Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ñ‹ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°Ğ¼
   */
  deal(deck: Card[], playerCount: number, cardsPerPlayer: number): Card[][] {
    const hands: Card[][] = Array(playerCount).fill([]).map(() => []);
    
    for (let i = 0; i < cardsPerPlayer; i++) {
      for (let p = 0; p < playerCount; p++) {
        const card = deck.shift();
        if (card) {
          hands[p].push(card);
        }
      }
    }
    
    return hands;
  }
  
  /**
   * ĞĞ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ±ĞµĞ´Ğ¸Ñ‚ĞµĞ»Ñ Ğ²Ğ·ÑÑ‚ĞºĞ¸
   */
  determineTrickWinner(
    table: TableCard[],
    trump: Suit | null
  ): number {
    let winnerIndex = 0;
    let highestCard = table[0];
    
    for (let i = 1; i < table.length; i++) {
      if (this.compareCards(table[i], highestCard, trump) > 0) {
        highestCard = table[i];
        winnerIndex = i;
      }
    }
    
    return winnerIndex;
  }
  
  /**
   * Ğ¡Ñ€Ğ°Ğ²Ğ½Ğ¸Ñ‚ÑŒ Ğ´Ğ²Ğµ ĞºĞ°Ñ€Ñ‚Ñ‹ (Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ 1 ĞµÑĞ»Ğ¸ card1 ÑĞ¸Ğ»ÑŒĞ½ĞµĞµ, -1 ĞµÑĞ»Ğ¸ ÑĞ»Ğ°Ğ±ĞµĞµ, 0 ĞµÑĞ»Ğ¸ Ñ€Ğ°Ğ²Ğ½Ñ‹)
   */
  private compareCards(
    card1: TableCard,
    card2: TableCard,
    trump: Suit | null
  ): number {
    // 1. Ğ”Ğ¶Ğ¾ĞºĞµÑ€Ñ‹
    if (card1.card.type === 'joker' && card2.card.type === 'joker') {
      // ĞĞ±Ğ° Ğ´Ğ¶Ğ¾ĞºĞµÑ€Ğ° Ñ Ğ¾Ğ¿Ñ†Ğ¸ĞµĞ¹ "Ğ¡Ğ²ĞµÑ€Ñ…Ñƒ" â†’ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ¿Ğ¾Ğ±ĞµĞ¶Ğ´Ğ°ĞµÑ‚
      if (card1.jokerOption === 'top' && card2.jokerOption === 'top') {
        // âš ï¸ Ğ’ĞĞ˜ĞœĞĞĞ˜Ğ•: Ğ­Ñ‚Ğ° Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° ĞĞ•ĞšĞĞ Ğ Ğ•ĞšĞ¢ĞĞ!
        // Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ compareCards() Ğ½Ğµ Ğ·Ğ½Ğ°ĞµÑ‚ Ğ¿Ğ¾Ñ€ÑĞ´Ğ¾Ğº Ñ…Ğ¾Ğ´Ğ¾Ğ².
        // Ğ”Ğ»Ñ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ñ "Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ĞµĞ³Ğ¾" Ğ½ÑƒĞ¶Ğ½Ğ¾:
        // 1. ĞŸĞµÑ€ĞµĞ´Ğ°Ğ²Ğ°Ñ‚ÑŒ Ğ¸Ğ½Ğ´ĞµĞºÑÑ‹ ĞºĞ°Ñ€Ñ‚ Ğ² table
        // 2. Ğ˜Ğ›Ğ˜ ÑÑ€Ğ°Ğ²Ğ½Ğ¸Ğ²Ğ°Ñ‚ÑŒ Ğ² determineTrickWinner Ñ ÑƒÑ‡Ñ‘Ñ‚Ğ¾Ğ¼ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¹
        // TODO: Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¸ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ - Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¸Ğ½Ğ´ĞµĞºÑÑ‹ Ğ¸Ğ· table
        return 1;  // Ğ’Ğ Ğ•ĞœĞ•ĞĞĞ: Ğ¿Ñ€ĞµĞ´Ğ¿Ğ¾Ğ»Ğ°Ğ³Ğ°ĞµĞ¼ card1 Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹
      }
      if (card1.jokerOption === 'bottom') return -1;
      if (card2.jokerOption === 'bottom') return 1;
      return 0;
    }
    
    if (card1.card.type === 'joker') {
      return card1.jokerOption === 'top' ? 1 : -1;
    }
    if (card2.card.type === 'joker') {
      return card2.jokerOption === 'top' ? -1 : 1;
    }
    
    // 2. Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ñ‹Ğµ ĞºĞ°Ñ€Ñ‚Ñ‹
    const c1 = card1.card as { suit: Suit; rank: Rank };
    const c2 = card2.card as { suit: Suit; rank: Rank };
    
    // ĞšĞ¾Ğ·Ñ‹Ñ€Ğ½Ğ°Ñ Ğ¼Ğ°ÑÑ‚ÑŒ Ğ±ÑŒĞµÑ‚ Ğ²ÑĞµ
    if (trump) {
      if (c1.suit === trump && c2.suit !== trump) return 1;
      if (c2.suit === trump && c1.suit !== trump) return -1;
    }
    
    // Ğ Ğ°Ğ·Ğ½Ñ‹Ğµ Ğ¼Ğ°ÑÑ‚Ğ¸ â†’ Ğ¿ĞµÑ€Ğ²Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° ÑĞ¸Ğ»ÑŒĞ½ĞµĞµ (Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ Ğ·Ğ°ÑˆĞµĞ»)
    if (c1.suit !== c2.suit) return -1;
    
    // ĞĞ´Ğ¸Ğ½Ğ°ĞºĞ¾Ğ²Ğ°Ñ Ğ¼Ğ°ÑÑ‚ÑŒ â†’ ÑÑ€Ğ°Ğ²Ğ½Ğ¸Ğ²Ğ°ĞµĞ¼ Ñ€Ğ°Ğ½Ğ³Ğ¸
    return c1.rank > c2.rank ? 1 : -1;
  }
}
```

---

### 2. Network Layer (WebSocket)

#### 2.1 WebSocket Gateway

```typescript
@WebSocketGateway({
  cors: {
    origin: process.env.FRONTEND_URL || '*',
    credentials: true
  }
})
export class GameGateway implements OnGatewayConnection, OnGatewayDisconnect {
  @WebSocketServer()
  server: Server;
  
  constructor(
    private roomManager: RoomManager,
    private gameEngine: GameEngineService,
    private botService: BotService
  ) {}
  
  /**
   * ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°
   */
  async handleConnection(client: Socket) {
    try {
      // 1. Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Telegram auth
      const userId = await this.validateTelegramAuth(client);
      
      // 2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ, Ğ±Ñ‹Ğ» Ğ»Ğ¸ Ğ¸Ğ³Ñ€Ğ¾Ğº Ğ² Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ¹ Ğ¸Ğ³Ñ€Ğµ
      const activeRoom = await this.roomManager.findActiveRoom(userId);
      
      if (activeRoom) {
        // ĞŸĞµÑ€ĞµĞ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ!
        await this.handleReconnection(client, userId, activeRoom);
      }
      
      // 3. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ¼Ğ°Ğ¿Ğ¿Ğ¸Ğ½Ğ³ userId â†’ socketId
      await this.roomManager.setUserSocket(userId, client.id);
      
      client.emit('connection_success', { userId });
    } catch (error) {
      client.emit('error', { code: 'AUTH_FAILED', message: error.message });
      client.disconnect();
    }
  }
  
  /**
   * ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾Ñ‚ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°
   */
  async handleDisconnect(client: Socket) {
    const userId = await this.roomManager.getUserBySocket(client.id);
    
    if (!userId) return;
    
    // Ğ”Ğ°Ñ‚ÑŒ Ğ¸Ğ³Ñ€Ğ¾ĞºÑƒ 30 ÑĞµĞºÑƒĞ½Ğ´ Ğ½Ğ° Ğ¿ĞµÑ€ĞµĞ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ
    setTimeout(async () => {
      const stillDisconnected = !(await this.roomManager.isUserConnected(userId));
      
      if (stillDisconnected) {
        await this.handlePlayerAbandon(userId);
      }
    }, 30000);  // 30 ÑĞµĞº
  }
  
  /**
   * ĞŸĞµÑ€ĞµĞ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°
   */
  private async handleReconnection(
    client: Socket,
    userId: string,
    room: GameRoom
  ) {
    // 1. ĞŸÑ€Ğ¸ÑĞ¾ĞµĞ´Ğ¸Ğ½Ğ¸Ñ‚ÑŒ socket Ğº ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğµ
    client.join(room.id);
    
    // 2. ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ socketId Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°
    const player = room.state.players.find(p => p.id === userId);
    if (player) {
      player.socketId = client.id;
      player.connected = true;
    }
    
    // 3. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞºÑƒÑ‰ĞµĞµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ
    const state = await this.gameEngine.getGameState(room.id);
    client.emit('game_state_restore', this.serializeState(state, userId));
  }
  
  /**
   * Ğ˜Ğ³Ñ€Ğ¾Ğº Ğ¾ĞºĞ¾Ğ½Ñ‡Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ²Ñ‹ÑˆĞµĞ» â†’ Ğ·Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ±Ğ¾Ñ‚Ğ¾Ğ¼
   */
  private async handlePlayerAbandon(userId: string) {
    const room = await this.roomManager.findActiveRoom(userId);
    
    if (!room) return;
    
    const player = room.state.players.find(p => p.id === userId);
    if (player) {
      player.isBot = true;
      player.connected = false;
      player.name = `Bot (${player.name})`;
    }
    
    // Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ¸Ñ‚ÑŒ Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ²
    this.server.to(room.id).emit('player_replaced_by_bot', {
      userId,
      playerName: player.name
    });
  }
}
```

#### 2.2 Event Handlers (Ğ¡Ğ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ Ğ¾Ñ‚ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°)

```typescript
@SubscribeMessage('find_game')
async handleFindGame(@ConnectedSocket() client: Socket) {
  const userId = await this.getUserId(client);
  
  // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ² Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ
  await this.roomManager.addToQueue(userId, client);
  
  // ĞŸĞ¾Ğ¿Ñ‹Ñ‚Ğ°Ñ‚ÑŒÑÑ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñƒ
  const room = await this.roomManager.tryCreateRoom();
  
  if (room) {
    // ĞšĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ° â†’ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ¸Ñ‚ÑŒ Ğ²ÑĞµÑ… Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ²
    room.playerIds.forEach(playerId => {
      const socket = this.roomManager.getSocket(playerId);
      socket?.emit('game_started', { roomId: room.id });
      socket?.join(room.id);
    });
    
    // ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ¸Ğ³Ñ€Ñƒ
    await this.gameEngine.startGame(room.id);
  } else {
    // Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ñ‚Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚: Ñ‡ĞµÑ€ĞµĞ· 60 ÑĞµĞº Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ±Ğ¾Ñ‚Ğ¾Ğ²
    setTimeout(async () => {
      await this.roomManager.fillWithBots(userId);
    }, 60000);
  }
}

@SubscribeMessage('join_room')
async handleJoinRoom(
  @ConnectedSocket() client: Socket,
  @MessageBody() payload: JoinRoomDto
) {
  const userId = await this.getUserId(client);
  
  // ĞŸÑ€Ğ¸ÑĞ¾ĞµĞ´Ğ¸Ğ½Ğ¸Ñ‚ÑŒÑÑ Ğº ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğµ
  client.join(payload.roomId);
  
  // ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñ‹
  const state = await this.gameEngine.getGameState(payload.roomId);
  
  // ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ
  client.emit('room_state', this.serializeState(state, userId));
}

@SubscribeMessage('make_bet')
async handleMakeBet(
  @ConnectedSocket() client: Socket,
  @MessageBody() payload: MakeBetDto
) {
  try {
    const userId = await this.getUserId(client);
    
    // ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ·Ğ°ĞºĞ°Ğ·
    const updatedState = await this.gameEngine.makeBet(
      payload.roomId,
      userId,
      payload.amount
    );
    
    // ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ñ‚Ğ°Ğ¹Ğ¼ĞµÑ€ Ñ…Ğ¾Ğ´Ğ°
    this.roomManager.clearTimer(payload.roomId, userId);
    
    // ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ²ÑĞµĞ¼
    this.broadcastGameState(payload.roomId, updatedState);
    
    // Ğ•ÑĞ»Ğ¸ Ğ²ÑĞµ Ğ·Ğ°ĞºĞ°Ğ·Ñ‹ ÑĞ´ĞµĞ»Ğ°Ğ½Ñ‹ â†’ Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ Ñ„Ğ°Ğ·Ñƒ Ğ¸Ğ³Ñ€Ñ‹
    if (this.allBetsPlaced(updatedState)) {
      await this.gameEngine.startPlayingPhase(payload.roomId);
    } else {
      // Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ñ‚Ğ°Ğ¹Ğ¼ĞµÑ€ Ğ´Ğ»Ñ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ³Ğ¾ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°
      this.startTurnTimer(payload.roomId, updatedState.currentPlayerIndex);
    }
    
  } catch (error) {
    client.emit('error', {
      code: error.code || 'UNKNOWN_ERROR',
      message: error.message
    });
  }
}

@SubscribeMessage('throw_card')
async handleThrowCard(
  @ConnectedSocket() client: Socket,
  @MessageBody() payload: ThrowCardDto
) {
  try {
    const userId = await this.getUserId(client);
    
    // ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ñ…Ğ¾Ğ´
    const updatedState = await this.gameEngine.throwCard(
      payload.roomId,
      userId,
      payload.cardId,
      payload.jokerOption  // Ğ•ÑĞ»Ğ¸ ÑÑ‚Ğ¾ Ğ”Ğ¶Ğ¾ĞºĞµÑ€
    );
    
    // ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ñ‚Ğ°Ğ¹Ğ¼ĞµÑ€
    this.roomManager.clearTimer(payload.roomId, userId);
    
    // ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ
    this.broadcastGameState(payload.roomId, updatedState);
    
    // ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ, Ğ·Ğ°ĞºĞ¾Ğ½Ñ‡Ğ¸Ğ»Ğ°ÑÑŒ Ğ»Ğ¸ Ğ²Ğ·ÑÑ‚ĞºĞ°
    if (updatedState.table.length === 4) {
      // ĞĞ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ±ĞµĞ´Ğ¸Ñ‚ĞµĞ»Ñ Ğ²Ğ·ÑÑ‚ĞºĞ¸ Ñ‡ĞµÑ€ĞµĞ· 2 ÑĞµĞºÑƒĞ½Ğ´Ñ‹ (Ğ´Ğ»Ñ Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ğ¸)
      setTimeout(async () => {
        await this.gameEngine.completeTrick(payload.roomId);
        const newState = await this.gameEngine.getGameState(payload.roomId);
        this.broadcastGameState(payload.roomId, newState);
        
        // ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ, Ğ·Ğ°ĞºĞ¾Ğ½Ñ‡Ğ¸Ğ»ÑÑ Ğ»Ğ¸ Ñ€Ğ°ÑƒĞ½Ğ´
        if (this.isRoundComplete(newState)) {
          await this.gameEngine.completeRound(payload.roomId);
        } else {
          // Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ñ…Ğ¾Ğ´
          this.startTurnTimer(payload.roomId, newState.currentPlayerIndex);
        }
      }, 2000);
    } else {
      // Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ñ…Ğ¾Ğ´
      this.startTurnTimer(payload.roomId, updatedState.currentPlayerIndex);
    }
    
  } catch (error) {
    client.emit('error', {
      code: error.code || 'ILLEGAL_MOVE',
      message: error.message
    });
  }
}

@SubscribeMessage('select_trump')
async handleSelectTrump(
  @ConnectedSocket() client: Socket,
  @MessageBody() payload: SelectTrumpDto
) {
  try {
    const userId = await this.getUserId(client);
    
    // ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ²Ñ‹Ğ±Ğ¾Ñ€ ĞºĞ¾Ğ·Ñ‹Ñ€Ñ (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ñ€Ğ°ÑƒĞ½Ğ´Ğ¾Ğ² Ğ¿Ğ¾ 9 ĞºĞ°Ñ€Ñ‚)
    const updatedState = await this.gameEngine.selectTrump(
      payload.roomId,
      userId,
      payload.trump  // Suit | null (null = Ğ±ĞµĞ· ĞºĞ¾Ğ·Ñ‹Ñ€ĞµĞ¹)
    );
    
    // ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ
    this.broadcastGameState(payload.roomId, updatedState);
    
  } catch (error) {
    client.emit('error', {
      code: error.code,
      message: error.message
    });
  }
}
```

#### 2.3 Room Manager

```typescript
@Injectable()
export class RoomManager {
  private waitingQueue: string[] = [];
  private rooms = new Map<string, GameRoom>();
  private userSockets = new Map<string, string>();  // userId â†’ socketId
  private timers = new Map<string, NodeJS.Timeout>();
  
  constructor(
    private redis: RedisService,
    private botService: BotService
  ) {}
  
  /**
   * Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° Ğ² Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ
   */
  async addToQueue(userId: string, socket: Socket): Promise<void> {
    if (!this.waitingQueue.includes(userId)) {
      this.waitingQueue.push(userId);
    }
    this.userSockets.set(userId, socket.id);
  }
  
  /**
   * ĞŸĞ¾Ğ¿Ñ‹Ñ‚Ğ°Ñ‚ÑŒÑÑ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñƒ Ğ¸Ğ· Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸
   */
  async tryCreateRoom(): Promise<GameRoom | null> {
    if (this.waitingQueue.length < 4) {
      return null;
    }
    
    // Ğ’Ğ·ÑÑ‚ÑŒ Ğ¿ĞµÑ€Ğ²Ñ‹Ñ… 4 Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ²
    const playerIds = this.waitingQueue.splice(0, 4);
    
    // Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñƒ
    const roomId = uuidv4();
    const room: GameRoom = {
      id: roomId,
      playerIds,
      createdAt: Date.now()
    };
    
    this.rooms.set(roomId, room);
    await this.redis.set(`room:${roomId}`, JSON.stringify(room));
    
    return room;
  }
  
  /**
   * Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ Ğ¿ÑƒÑÑ‚Ñ‹Ğµ ÑĞ»Ğ¾Ñ‚Ñ‹ Ğ±Ğ¾Ñ‚Ğ°Ğ¼Ğ¸
   */
  async fillWithBots(userId: string): Promise<GameRoom> {
    // Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ¸Ğ· Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸
    const index = this.waitingQueue.indexOf(userId);
    if (index > -1) {
      this.waitingQueue.splice(index, 1);
    }
    
    // Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñƒ Ñ Ğ±Ğ¾Ñ‚Ğ°Ğ¼Ğ¸
    const playerIds = [
      userId,
      `bot-${uuidv4()}`,
      `bot-${uuidv4()}`,
      `bot-${uuidv4()}`
    ];
    
    const roomId = uuidv4();
    const room: GameRoom = {
      id: roomId,
      playerIds,
      createdAt: Date.now()
    };
    
    this.rooms.set(roomId, room);
    await this.redis.set(`room:${roomId}`, JSON.stringify(room));
    
    return room;
  }
  
  /**
   * ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½ÑƒÑ ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñƒ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°
   */
  async findActiveRoom(userId: string): Promise<GameRoom | null> {
    // ĞŸĞ¾Ğ¸ÑĞº Ğ² Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸
    for (const room of this.rooms.values()) {
      if (room.playerIds.includes(userId)) {
        return room;
      }
    }
    
    // ĞŸĞ¾Ğ¸ÑĞº Ğ² Redis
    const keys = await this.redis.keys('room:*');
    for (const key of keys) {
      const data = await this.redis.get(key);
      const room = JSON.parse(data) as GameRoom;
      if (room.playerIds.includes(userId)) {
        this.rooms.set(room.id, room);  // ĞšĞµÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ
        return room;
      }
    }
    
    return null;
  }
}
```

#### 2.4 Turn Timer (Ğ¢Ğ°Ğ¹Ğ¼ĞµÑ€ Ñ…Ğ¾Ğ´Ğ°)

```typescript
/**
 * Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ñ‚Ğ°Ğ¹Ğ¼ĞµÑ€ Ğ½Ğ° Ñ…Ğ¾Ğ´
 * Ğ•ÑĞ»Ğ¸ Ğ¸Ğ³Ñ€Ğ¾Ğº Ğ½Ğµ ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ·Ğ° 30 ÑĞµĞº â†’ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ñ…Ğ¾Ğ´
 */
private startTurnTimer(roomId: string, playerIndex: number) {
  const state = await this.gameEngine.getGameState(roomId);
  const player = state.players[playerIndex];
  
  // Ğ•ÑĞ»Ğ¸ ÑÑ‚Ğ¾ Ğ±Ğ¾Ñ‚ â†’ ÑĞ´ĞµĞ»Ğ°Ñ‚ÑŒ Ñ…Ğ¾Ğ´ Ğ½ĞµĞ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ğ¾
  if (player.isBot) {
    setTimeout(async () => {
      await this.makeBotMove(roomId, player.id);
    }, 1000);  // 1 ÑĞµĞº Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ´Ğ»Ñ Ñ€ĞµĞ°Ğ»Ğ¸ÑÑ‚Ğ¸Ñ‡Ğ½Ğ¾ÑÑ‚Ğ¸
    return;
  }
  
  // Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ñ‚Ğ°Ğ¹Ğ¼ĞµÑ€ Ğ´Ğ»Ñ Ğ¶Ğ¸Ğ²Ğ¾Ğ³Ğ¾ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°
  const timerKey = `${roomId}-${player.id}`;
  
  const timer = setTimeout(async () => {
    // Ğ’Ñ€ĞµĞ¼Ñ Ğ¸ÑÑ‚ĞµĞºĞ»Ğ¾ â†’ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ñ…Ğ¾Ğ´
    await this.makeBotMove(roomId, player.id);
  }, 30000);  // 30 ÑĞµĞº
  
  this.roomManager.setTimer(timerKey, timer);
  
  // Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ¸Ñ‚ÑŒ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ² Ğ¾ Ñ‚Ğ°Ğ¹Ğ¼ĞµÑ€Ğµ
  this.server.to(roomId).emit('turn_timer_started', {
    playerId: player.id,
    expiresAt: Date.now() + 30000
  });
}

/**
 * Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ñ…Ğ¾Ğ´ Ğ·Ğ° Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° (Ğ±Ğ¾Ñ‚ Ğ¸Ğ»Ğ¸ Ñ‚Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚)
 */
private async makeBotMove(roomId: string, playerId: string) {
  const state = await this.gameEngine.getGameState(roomId);
  
  if (state.phase === GamePhase.Betting) {
    // Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ·Ğ°ĞºĞ°Ğ·
    const bet = this.botService.makeBet(state, playerId);
    await this.handleMakeBet(
      { id: playerId } as Socket,
      { roomId, amount: bet }
    );
  } else if (state.phase === GamePhase.Playing) {
    // Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ñ…Ğ¾Ğ´
    const move = this.botService.makeMove(state, playerId);
    await this.handleThrowCard(
      { id: playerId } as Socket,
      { roomId, cardId: move.cardId, jokerOption: move.jokerOption }
    );
  }
}
```

---

### 3. Bot AI (ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğ¹ Ğ±Ğ¾Ñ‚)

#### 3.1 Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ (Random Valid Move)

```typescript
@Injectable()
export class BotService {
  constructor(
    private moveValidator: MoveValidator
  ) {}
  
  /**
   * Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ·Ğ°ĞºĞ°Ğ· (Ğ¿Ñ€Ğ¾ÑÑ‚Ğ°Ñ ÑĞ²Ñ€Ğ¸ÑÑ‚Ğ¸ĞºĞ°)
   */
  makeBet(state: GameState, playerId: string): number {
    const player = state.players.find(p => p.id === playerId);
    const trump = state.trump;
    
    // ĞŸĞ¾ÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ "ÑĞ¸Ğ»ÑŒĞ½Ñ‹Ğµ" ĞºĞ°Ñ€Ñ‚Ñ‹
    let strongCards = 0;
    
    player.hand.forEach(card => {
      if (card.type === 'joker') {
        strongCards += 1;  // Ğ”Ğ¶Ğ¾ĞºĞµÑ€ = Ğ³Ğ°Ñ€Ğ°Ğ½Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ Ğ²Ğ·ÑÑ‚ĞºĞ°
      } else if (card.suit === trump && card.rank >= Rank.Jack) {
        strongCards += 0.8;  // ĞšĞ¾Ğ·Ñ‹Ñ€Ğ½Ñ‹Ğµ Ñ„Ğ¸Ğ³ÑƒÑ€Ñ‹
      } else if (card.rank >= Rank.King) {
        strongCards += 0.5;  // Ğ¢ÑƒĞ·Ñ‹ Ğ¸ ĞºĞ¾Ñ€Ğ¾Ğ»Ğ¸
      }
    });
    
    // ĞĞºÑ€ÑƒĞ³Ğ»Ğ¸Ñ‚ÑŒ
    let bet = Math.floor(strongCards);
    
    // ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ½Ğ¾ÑÑ‚ÑŒ (Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ¾ "Ğ²Ñ‹Ğ½ÑƒĞ¶Ğ´ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾")
    const currentBets = state.players.map(p => p.bet);
    const isValid = this.betValidator.validate(
      currentBets,
      bet,
      player.hand.length,
      state.players.indexOf(player),
      state.dealerIndex
    );
    
    if (!isValid.valid) {
      // Ğ¡ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ·Ğ°ĞºĞ°Ğ·
      bet = bet > 0 ? bet - 1 : bet + 1;
    }
    
    return Math.max(0, bet);
  }
  
  /**
   * Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ñ…Ğ¾Ğ´ (ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ğ°Ñ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ°)
   */
  makeMove(state: GameState, playerId: string): BotMove {
    const player = state.players.find(p => p.id === playerId);
    
    // ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ½Ñ‹Ñ… ĞºĞ°Ñ€Ñ‚
    const validCards = player.hand.filter(card => {
      const result = this.moveValidator.validate(
        player,
        card,
        state.table,
        state.trump
      );
      return result.valid;
    });
    
    // Ğ•ÑĞ»Ğ¸ Ğ½ĞµÑ‚ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ½Ñ‹Ñ… ĞºĞ°Ñ€Ñ‚ (Ğ¾ÑˆĞ¸Ğ±ĞºĞ° Ğ² Ğ»Ğ¾Ğ³Ğ¸ĞºĞµ)
    if (validCards.length === 0) {
      return { cardId: player.hand[0].id };
    }
    
    // Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½ÑƒÑ
    const randomCard = validCards[Math.floor(Math.random() * validCards.length)];
    
    // Ğ•ÑĞ»Ğ¸ ÑÑ‚Ğ¾ Ğ”Ğ¶Ğ¾ĞºĞµÑ€ â†’ Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¾Ğ¿Ñ†Ğ¸Ñ
    let jokerOption: JokerOption | undefined;
    
    if (randomCard.type === 'joker') {
      if (state.table.length === 0) {
        // Ğ¥Ğ¾Ğ´Ğ¸Ğ¼ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¼Ğ¸ â†’ Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ High/Low
        jokerOption = Math.random() > 0.5 ? JokerOption.High : JokerOption.Low;
      } else {
        // Ğ¥Ğ¾Ğ´Ğ¸Ğ¼ Ğ½Ğµ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¼Ğ¸ â†’ Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Top/Bottom
        // Ğ•ÑĞ»Ğ¸ Ğ½ÑƒĞ¶Ğ½Ğ° Ğ²Ğ·ÑÑ‚ĞºĞ° â†’ Top, Ğ¸Ğ½Ğ°Ñ‡Ğµ Bottom
        const needsTrick = player.tricks < player.bet;
        jokerOption = needsTrick ? JokerOption.Top : JokerOption.Bottom;
      }
    }
    
    return {
      cardId: randomCard.id,
      jokerOption
    };
  }
}
```

---

### 4. Data Persistence (Ğ¥Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ)

#### 4.1 Redis Service (Hot Data)

```typescript
@Injectable()
export class RedisService {
  private client: Redis;
  
  constructor() {
    this.client = new Redis({
      host: process.env.REDIS_HOST || 'localhost',
      port: parseInt(process.env.REDIS_PORT) || 6379,
      password: process.env.REDIS_PASSWORD
    });
  }
  
  /**
   * Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¸Ğ³Ñ€Ñ‹ (Ñ TTL)
   */
  async saveGameState(roomId: string, state: GameState): Promise<void> {
    await this.client.set(
      `game:${roomId}`,
      JSON.stringify(state),
      'EX',
      7200  // TTL 2 Ñ‡Ğ°ÑĞ°
    );
  }
  
  /**
   * ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¸Ğ³Ñ€Ñ‹
   */
  async getGameState(roomId: string): Promise<GameState | null> {
    const data = await this.client.get(`game:${roomId}`);
    return data ? JSON.parse(data) : null;
  }
  
  /**
   * Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ¸Ğ³Ñ€Ñƒ
   */
  async deleteGame(roomId: string): Promise<void> {
    await this.client.del(`game:${roomId}`);
  }
}
```

#### 4.2 PostgreSQL (Cold Data - JSONB)

```sql
-- Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ½Ñ‹Ñ… Ğ¸Ğ³Ñ€
CREATE TABLE games (
  id UUID PRIMARY KEY,
  created_at TIMESTAMP DEFAULT NOW(),
  finished_at TIMESTAMP,
  
  -- Ğ˜Ğ³Ñ€Ğ¾ĞºĞ¸ (Ğ¼Ğ°ÑÑĞ¸Ğ² JSON)
  players JSONB NOT NULL,
  
  -- ĞŸĞ¾Ğ»Ğ½Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¸Ğ³Ñ€Ñ‹ (JSONB)
  state JSONB NOT NULL,
  
  -- ĞŸĞ¾Ğ±ĞµĞ´Ğ¸Ñ‚ĞµĞ»ÑŒ
  winner_id TEXT,
  
  -- Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ°
  CONSTRAINT games_players_check CHECK (jsonb_array_length(players) = 4)
);

-- Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹
CREATE INDEX idx_games_players ON games USING GIN (players);
CREATE INDEX idx_games_finished_at ON games (finished_at DESC);
CREATE INDEX idx_games_winner ON games (winner_id);

-- ĞŸĞ¾Ğ¸ÑĞº Ğ¸Ğ³Ñ€ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°
CREATE INDEX idx_games_player_search ON games ((players::text));
```

```typescript
@Injectable()
export class GameRepository {
  constructor(
    @InjectRepository(GameEntity)
    private repository: Repository<GameEntity>
  ) {}
  
  /**
   * Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ½ÑƒÑ Ğ¸Ğ³Ñ€Ñƒ
   */
  async saveFinishedGame(state: GameState): Promise<void> {
    await this.repository.save({
      id: state.id,
      players: state.players.map(p => ({ id: p.id, name: p.name })),
      state: state as any,  // JSONB
      winnerId: state.winnerId,
      finishedAt: new Date(state.finishedAt)
    });
  }
  
  /**
   * ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¸Ğ³Ñ€ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°
   */
  async getPlayerHistory(userId: string, limit = 20): Promise<GameEntity[]> {
    return this.repository
      .createQueryBuilder('game')
      .where(`game.players::text LIKE :userId`, { userId: `%${userId}%` })
      .orderBy('game.finished_at', 'DESC')
      .limit(limit)
      .getMany();
  }
}
```

---

### 5. REST API (Ğ´Ğ»Ñ Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´Ğ°)

#### 5.1 Games Controller

```typescript
@Controller('api/games')
export class GamesController {
  constructor(
    private gameRepository: GameRepository
  ) {}
  
  /**
   * GET /api/games/history/:userId
   * ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¸Ğ³Ñ€ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°
   */
  @Get('history/:userId')
  async getHistory(@Param('userId') userId: string) {
    const games = await this.gameRepository.getPlayerHistory(userId);
    
    return {
      games: games.map(game => ({
        id: game.id,
        finishedAt: game.finishedAt,
        players: game.players,
        myScore: this.getPlayerScore(game.state, userId),
        winnerId: game.winnerId
      }))
    };
  }
  
  /**
   * GET /api/games/:gameId
   * ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸ Ğ¸Ğ³Ñ€Ñ‹
   */
  @Get(':gameId')
  async getGame(@Param('gameId') gameId: string) {
    const game = await this.gameRepository.findOne({ where: { id: gameId } });
    
    if (!game) {
      throw new NotFoundException('Game not found');
    }
    
    return {
      id: game.id,
      state: game.state,
      finishedAt: game.finishedAt
    };
  }
}
```

#### 5.2 Leaderboard Controller

```typescript
@Controller('api/leaderboard')
export class LeaderboardController {
  constructor(
    @InjectDataSource()
    private dataSource: DataSource
  ) {}
  
  /**
   * GET /api/leaderboard
   * Ğ¢Ğ¾Ğ¿-100 Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ² Ğ¿Ğ¾ Ğ¾Ñ‡ĞºĞ°Ğ¼
   */
  @Get()
  async getLeaderboard(@Query('limit') limit = 100) {
    const result = await this.dataSource.query(`
      SELECT 
        (players->0->>'id') as user_id,
        (players->0->>'name') as user_name,
        SUM((state->'players'->0->>'totalScore')::int) as total_score,
        COUNT(*) as games_played
      FROM games
      WHERE finished_at IS NOT NULL
      GROUP BY user_id, user_name
      ORDER BY total_score DESC
      LIMIT $1
    `, [limit]);
    
    return { leaderboard: result };
  }
}
```

---

### 6. Telegram Integration

#### 6.1 Auth Guard (Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ initData)

```typescript
@Injectable()
export class TelegramAuthGuard implements CanActivate {
  canActivate(context: ExecutionContext): boolean {
    const client = context.switchToWs().getClient<Socket>();
    const initData = client.handshake.auth.initData;
    
    if (!initData) {
      throw new WsException('AUTH_REQUIRED');
    }
    
    // Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· HMAC
    const isValid = this.validateInitData(initData);
    
    if (!isValid) {
      throw new WsException('INVALID_AUTH');
    }
    
    return true;
  }
  
  /**
   * Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ initData Ğ¿Ğ¾ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ğ¸ Telegram
   */
  private validateInitData(initData: string): boolean {
    const BOT_TOKEN = process.env.TELEGRAM_BOT_TOKEN;
    
    // ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ init_data
    const params = new URLSearchParams(initData);
    const hash = params.get('hash');
    params.delete('hash');
    
    // Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ data_check_string
    const dataCheckString = Array.from(params.entries())
      .sort(([a], [b]) => a.localeCompare(b))
      .map(([key, value]) => `${key}=${value}`)
      .join('\n');
    
    // Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚ÑŒ secret_key
    const secretKey = crypto
      .createHmac('sha256', 'WebAppData')
      .update(BOT_TOKEN)
      .digest();
    
    // Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚ÑŒ hash
    const calculatedHash = crypto
      .createHmac('sha256', secretKey)
      .update(dataCheckString)
      .digest('hex');
    
    return calculatedHash === hash;
  }
}
```

---

### 7. Testing Strategy

#### 7.1 Unit Tests (Core Logic)

**ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚:** ĞŸĞ¾ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ Ñ‚ĞµÑÑ‚Ğ°Ğ¼Ğ¸ **Ğ²ÑĞµÑ… ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»**

```typescript
// game-engine.spec.ts
describe('GameEngine', () => {
  describe('Move Validation', () => {
    it('should require player to follow suit', () => {
      const player = { hand: [hearts6, clubs7] };
      const table = [hearts9];  // ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ Ğ·Ğ°ÑˆĞµĞ» Ñ‡ĞµÑ€Ğ²Ğ°Ğ¼Ğ¸
      
      const result = validator.validate(player, clubs7, table, null);
      
      expect(result.valid).toBe(false);
      expect(result.reason).toBe('MUST_FOLLOW_SUIT');
    });
    
    it('should require trump if no suit', () => {
      const player = { hand: [clubs7, spadesTen] };
      const table = [hearts9];
      const trump = Suit.Spades;
      
      const result = validator.validate(player, clubs7, table, trump);
      
      expect(result.valid).toBe(false);
      expect(result.reason).toBe('MUST_PLAY_TRUMP');
    });
    
    it('should allow joker anytime', () => {
      const player = { hand: [hearts6, joker1] };
      const table = [hearts9];
      
      const result = validator.validate(player, joker1, table, null);
      
      expect(result.valid).toBe(true);
    });
  });
  
  describe('Joker Rules', () => {
    it('should force highest card when Joker demands High', () => {
      const player = { hand: [hearts6, heartsKing, heartsAce] };
      
      const highestCard = validator.validateJokerHigh(player, Suit.Hearts);
      
      expect(highestCard.rank).toBe(Rank.Ace);
    });
    
    it('should handle two Jokers with Top option', () => {
      const table: TableCard[] = [
        { card: joker1, playerId: 'p1', jokerOption: JokerOption.Top },
        { card: hearts9, playerId: 'p2' },
        { card: joker2, playerId: 'p3', jokerOption: JokerOption.Top }
      ];
      
      const winner = deckService.determineTrickWinner(table, null);
      
      expect(winner).toBe(2);  // ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ”Ğ¶Ğ¾ĞºĞµÑ€
    });
  });
  
  describe('Scoring', () => {
    it('should give 50 points per trick when bet matches', () => {
      const player = { bet: 3, tricks: 3 };
      
      const score = scoringService.calculateRoundScore(player, 5);
      
      expect(score).toBe(150);  // 50 * 3
    });
    
    it('should give 100 points per trick when took all', () => {
      const player = { bet: 5, tricks: 5 };
      
      const score = scoringService.calculateRoundScore(player, 5);
      
      expect(score).toBe(500);  // 100 * 5
    });
    
    it('should give -200 for Shtanga', () => {
      const player = { bet: 2, tricks: 0 };
      
      const score = scoringService.calculateRoundScore(player, 5);
      
      expect(score).toBe(-200);
    });
    
    it('should give 10 points per trick when bet != tricks', () => {
      const player = { bet: 2, tricks: 4 };
      
      const score = scoringService.calculateRoundScore(player, 5);
      
      expect(score).toBe(40);  // 10 * 4
    });
  });
  
  describe('Premiums (Pulka Bonus)', () => {
    it('should calculate premium like in "Diod" example from PDF', () => {
      // TODO: Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‚ĞµÑÑ‚ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ° Ğ¸Ğ· PDF
    });
  });
  
  describe('Forced Bet', () => {
    it('should forbid bet that equals round length', () => {
      const currentBets = [2, 1, 1];
      const newBet = 1;
      const roundLength = 5;
      const isLastPlayer = true;
      
      const result = betValidator.validate(
        currentBets,
        newBet,
        roundLength,
        3,
        3
      );
      
      expect(result.valid).toBe(false);
      expect(result.reason).toBe('FORBIDDEN_BET');
    });
  });
});
```

**Ğ¦ĞµĞ»ÑŒ:** ĞĞ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ **50+ Ñ‚ĞµÑÑ‚Ğ¾Ğ²** Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ» Ğ¸Ğ· PDF.

#### 7.2 Integration Tests

```typescript
describe('Game Flow (Integration)', () => {
  it('should complete full round', async () => {
    // 1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¸Ğ³Ñ€Ñƒ
    const game = await gameEngine.createGame(['p1', 'p2', 'p3', 'p4']);
    
    // 2. Ğ Ğ°Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ñ‹
    await gameEngine.dealCards(game.id, 5);
    
    // 3. Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ·Ğ°ĞºĞ°Ğ·Ñ‹
    await gameEngine.makeBet(game.id, 'p1', 2);
    await gameEngine.makeBet(game.id, 'p2', 1);
    await gameEngine.makeBet(game.id, 'p3', 1);
    await gameEngine.makeBet(game.id, 'p4', 0);  // Ğ’Ñ‹Ğ½ÑƒĞ¶Ğ´ĞµĞ½Ğ½Ñ‹Ğ¹
    
    // 4. Ğ¡Ñ‹Ğ³Ñ€Ğ°Ñ‚ÑŒ Ğ²Ğ·ÑÑ‚ĞºĞ¸
    // ... (Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ„Ğ»Ğ¾Ñƒ)
    
    // 5. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´ÑÑ‡ĞµÑ‚ Ğ¾Ñ‡ĞºĞ¾Ğ²
    const finalState = await gameEngine.getGameState(game.id);
    expect(finalState.phase).toBe(GamePhase.Scoring);
  });
});
```

#### 7.3 Load Testing

```bash
# Artillery config
config:
  target: "ws://localhost:3000"
  phases:
    - duration: 60
      arrivalRate: 10  # 10 Ğ½Ğ¾Ğ²Ñ‹Ñ… ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğ¹/ÑĞµĞº

scenarios:
  - name: "Bot game simulation"
    engine: "socketio"
    flow:
      - emit:
          channel: "find_game"
      - think: 2
      - emit:
          channel: "make_bet"
          data:
            amount: 2
```

---

### 8. Deployment

#### 8.1 Docker Compose

```yaml
version: '3.8'

services:
  backend:
    build: .
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
      - REDIS_HOST=redis
      - POSTGRES_HOST=postgres
      - TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN}
    depends_on:
      - redis
      - postgres
  
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
  
  postgres:
    image: postgres:15-alpine
    environment:
      POSTGRES_DB: joker
      POSTGRES_USER: joker
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data

volumes:
  redis_data:
  postgres_data:
```

#### 8.2 PM2 Ecosystem

```javascript
module.exports = {
  apps: [{
    name: 'joker-backend',
    script: './dist/main.js',
    instances: 2,
    exec_mode: 'cluster',
    env: {
      NODE_ENV: 'production'
    },
    error_file: './logs/error.log',
    out_file: './logs/out.log',
    log_date_format: 'YYYY-MM-DD HH:mm:ss',
    merge_logs: true,
    autorestart: true,
    watch: false,
    max_memory_restart: '1G'
  }]
};
```

---

## ğŸ“ WebSocket API Contract

### Ğ¡Ğ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ Client â†’ Server

#### `find_game`
ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ¸Ğ³Ñ€Ñƒ (Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒÑÑ Ğ² Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ).

**Payload:** ĞĞµÑ‚ (Ğ¿ÑƒÑÑ‚Ğ¾Ğ¹ Ğ¾Ğ±ÑŠĞµĞºÑ‚ `{}`)

**Response:**
1. `game_started` (ĞºĞ¾Ğ³Ğ´Ğ° ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğ° ÑĞ¾Ğ±Ñ€Ğ°Ğ½Ğ°)
2. `waiting_for_players` (ĞµÑĞ»Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ Ğ² Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ, Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)

---

#### `join_room`
ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒÑÑ Ğº ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ¹ ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğµ (Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸ Ñ€ĞµĞºĞ¾Ğ½Ğ½ĞµĞºÑ‚Ğµ Ğ¸Ğ»Ğ¸ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğµ Ğ¿Ğ¾ ÑÑÑ‹Ğ»ĞºĞµ).

**Payload:**
```json
{
  "roomId": "uuid-string"
}
```

---

#### `make_bet`
Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ·Ğ°ĞºĞ°Ğ· Ğ²Ğ·ÑÑ‚Ğ¾Ğº Ğ² Ñ„Ğ°Ğ·Ğµ `betting`.

**Payload:**
```json
{
  "roomId": "uuid-string",
  "amount": 2
}
```

**ĞÑˆĞ¸Ğ±ĞºĞ¸:**
- `FORBIDDEN_BET`: ĞĞ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° "Ğ²Ñ‹Ğ½ÑƒĞ¶Ğ´ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾" (ÑÑƒĞ¼Ğ¼Ğ° Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ² == Ğ´Ğ»Ğ¸Ğ½Ğµ Ñ€Ğ°ÑƒĞ½Ğ´Ğ° Ñƒ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ĞµĞ³Ğ¾ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°).
- `BET_OUT_OF_RANGE`: Ğ—Ğ°ĞºĞ°Ğ· Ğ¼ĞµĞ½ÑŒÑˆĞµ 0 Ğ¸Ğ»Ğ¸ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ° ĞºĞ°Ñ€Ñ‚.

---

#### `throw_card`
Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ñ…Ğ¾Ğ´ ĞºĞ°Ñ€Ñ‚Ğ¾Ğ¹.

**Payload:**
```json
{
  "roomId": "uuid-string",
  "cardId": "hearts-10",
  "jokerOption": "high" // ĞĞ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾, ĞµÑĞ»Ğ¸ cardId == "joker-1" Ğ¸Ğ»Ğ¸ "joker-2"
}
```
*Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ñ‹Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ `jokerOption`:* `"high"`, `"low"`, `"top"`, `"bottom"`.

**ĞÑˆĞ¸Ğ±ĞºĞ¸:**
- `ILLEGAL_MOVE`: ĞĞµ Ğ² Ğ¼Ğ°ÑÑ‚ÑŒ, Ğ¸Ğ»Ğ¸ Ğ½Ğµ ĞºĞ¾Ğ·Ñ‹Ñ€ÑŒ (Ğ¿Ñ€Ğ¸ Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ğ¸), Ğ¸Ğ»Ğ¸ Ñ…Ğ¾Ğ´ Ğ½Ğµ Ğ² ÑĞ²Ğ¾Ñ Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ.

---

#### `select_trump`
Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ·Ñ‹Ñ€ÑŒ (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡Ğ°ĞµÑ‚ ĞºĞ¾Ğ·Ñ‹Ñ€ÑŒ Ğ² Ñ€Ğ°ÑƒĞ½Ğ´Ğ°Ñ… Ğ¿Ğ¾ 9 ĞºĞ°Ñ€Ñ‚).

**Payload:**
```json
{
  "roomId": "uuid-string",
  "trump": "hearts" // Ğ¸Ğ»Ğ¸ null Ğ´Ğ»Ñ Ğ¸Ğ³Ñ€Ñ‹ "Ğ±ĞµĞ· ĞºĞ¾Ğ·Ñ‹Ñ€ĞµĞ¹"
}
```

---

### Ğ¡Ğ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ Server â†’ Client

Ğ­Ñ‚Ğ¸ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ ĞºĞ»Ğ¸ĞµĞ½Ñ‚ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ "ÑĞ»ÑƒÑˆĞ°Ñ‚ÑŒ".

#### `game_started`
Ğ˜Ğ³Ñ€Ğ° Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ° Ğ¸ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ°ÑÑŒ. ĞšĞ»Ğ¸ĞµĞ½Ñ‚ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ÑĞºÑ€Ğ°Ğ½ Ğ½Ğ° Ğ¸Ğ³Ñ€Ğ¾Ğ²Ğ¾Ğ¹ ÑÑ‚Ğ¾Ğ».

**Data:**
```json
{
  "roomId": "uuid-string",
  "players": [
    { "id": "user1", "name": "Alex", "avatarUrl": "..." },
    { "id": "user2", "name": "Bot", "avatarUrl": "..." },
    ...
  ]
}
```

---

#### `game_state_update`
ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸. ĞŸÑ€Ğ¸Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ¿Ğ¾ÑĞ»Ğµ **Ğ»ÑĞ±Ğ¾Ğ³Ğ¾** Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ (Ñ…Ğ¾Ğ´, ÑÑ‚Ğ°Ğ²ĞºĞ°, Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ñ€Ğ°ÑƒĞ½Ğ´).

**Ğ’Ğ°Ğ¶Ğ½Ğ¾:** Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ±Ñ‹Ñ‚ÑŒ **ÑĞ°Ğ½Ğ¸Ñ‚Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹**. Ğ˜Ğ³Ñ€Ğ¾Ğº Ğ½Ğµ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ²Ğ¸Ğ´ĞµÑ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ñ‹ ÑĞ¾Ğ¿ĞµÑ€Ğ½Ğ¸ĞºĞ¾Ğ² Ğ² Ğ¼Ğ°ÑÑĞ¸Ğ²Ğµ `hand`.

**Data:**
```json
{
  "phase": "playing", // betting, scoring, etc.
  "round": 5,         // Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ñ€Ğ°ÑƒĞ½Ğ´ (ĞºĞ¾Ğ»-Ğ²Ğ¾ ĞºĞ°Ñ€Ñ‚)
  "pulka": 1,
  "trump": "hearts",  // Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ ĞºĞ¾Ğ·Ñ‹Ñ€ÑŒ
  
  "currentPlayerIndex": 2, // Ğ§ĞµĞ¹ ÑĞµĞ¹Ñ‡Ğ°Ñ Ñ…Ğ¾Ğ´
  
  "table": [ // ĞšĞ°Ñ€Ñ‚Ñ‹ Ğ½Ğ° ÑÑ‚Ğ¾Ğ»Ğµ
    { "card": { "id": "hearts-10", ... }, "playerId": "user1" }
  ],
  
  "myHand": [ // Ğ¢ĞĞ›Ğ¬ĞšĞ ĞºĞ°Ñ€Ñ‚Ñ‹ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°
    { "id": "clubs-ace", "suit": "clubs", "rank": 14 }
  ],
  
  "players": [ // ĞŸÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ğ°Ñ Ğ¸Ğ½Ñ„Ğ¾ Ğ¾ Ğ²ÑĞµÑ… Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°Ñ…
    {
      "id": "user1",
      "name": "Alex",
      "cardsCount": 4, // Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ ĞºĞ°Ñ€Ñ‚ Ğ¾ÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ (Ğ±ĞµĞ· Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ğ¸Ñ Ğ½Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ»Ğ°)
      "bet": 2,        // Ğ—Ğ°ĞºĞ°Ğ·
      "tricks": 1,     // Ğ’Ğ·ÑÑ‚Ñ‹Ğµ Ğ²Ğ·ÑÑ‚ĞºĞ¸
      "connected": true
    },
    ...
  ],
  
  "turnTimeout": 28500 // Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ¼Ñ Ğ¾ÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ Ğ½Ğ° Ñ…Ğ¾Ğ´
}
```

---

#### `turn_timer_started`
Ğ¡ĞµÑ€Ğ²ĞµÑ€ Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ğ» Ñ‚Ğ°Ğ¹Ğ¼ĞµÑ€ Ğ´Ğ»Ñ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°. Ğ¤Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ "Ğ³Ñ€Ğ°Ğ´ÑƒÑĞ½Ğ¸Ğº" Ğ¸Ğ»Ğ¸ ĞºĞ°ÑƒĞ½Ñ‚ĞµÑ€.

**Data:**
```json
{
  "playerId": "user2",
  "expiresAt": 1708500000123 // Timestamp Ğ¾ĞºĞ¾Ğ½Ñ‡Ğ°Ğ½Ğ¸Ñ
}
```

---

#### `round_result`
ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ² ĞºĞ¾Ğ½Ñ†Ğµ Ñ€Ğ°ÑƒĞ½Ğ´Ğ° Ğ¿ĞµÑ€ĞµĞ´ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ¾Ğ¼ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ³Ğ¾ (Ğ¿Ñ€Ğ¾Ğ¼ĞµĞ¶ÑƒÑ‚Ğ¾Ñ‡Ğ½Ğ°Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°).

**Data:**
```json
{
  "scores": {
    "user1": 150, // +150 Ğ¾Ñ‡ĞºĞ¾Ğ²
    "user2": -200 // Ğ¨Ñ‚Ğ°Ğ½Ğ³Ğ°!
  },
  "totalScores": { "user1": 450, ... }
}
```

---

#### `game_over`
Ğ˜Ğ³Ñ€Ğ° Ğ¾ĞºĞ¾Ğ½Ñ‡ĞµĞ½Ğ°.

**Data:**
```json
{
  "winnerId": "user1",
  "finalTable": [ ... ], // ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²
  "rewards": { "xp": 100, "rating": +25 }
}
```

#### `error`
ĞĞ±Ñ‰Ğ°Ñ Ğ¾ÑˆĞ¸Ğ±ĞºĞ° (Ğ²ÑĞ¿Ğ»Ñ‹Ğ²Ğ°ÑÑ‰ĞµĞµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ).

**Data:**
```json
{
  "code": "ILLEGAL_MOVE",
  "message": "Ğ’Ñ‹ Ğ¾Ğ±ÑĞ·Ğ°Ğ½Ñ‹ Ğ¿Ğ¾Ğ»Ğ¾Ğ¶Ğ¸Ñ‚ÑŒ Ğ¿Ğ¸ĞºĞ¸!"
}
```

---

## âœ… Definition of Done (ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¸ Ğ¿Ñ€Ğ¸ĞµĞ¼ĞºĞ¸)

ĞŸÑ€Ğ¾ĞµĞºÑ‚ ÑÑ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ÑÑ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ½Ñ‹Ğ¼, ĞµÑĞ»Ğ¸:

1.  **ĞŸÑ€Ğ¾Ñ…Ğ¾Ğ´ÑÑ‚ Ñ‚ĞµÑÑ‚Ñ‹:** 50+ unit-Ñ‚ĞµÑÑ‚Ğ¾Ğ² Ğ¿Ğ¾ĞºÑ€Ñ‹Ğ²Ğ°ÑÑ‚ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ñ…Ğ¾Ğ´Ğ¾Ğ² Ğ¸ Ğ¿Ğ¾Ğ´ÑÑ‡ĞµÑ‚Ğ° Ğ¾Ñ‡ĞºĞ¾Ğ² (Ğ²ĞºĞ»ÑÑ‡Ğ°Ñ "Ğ¨Ñ‚Ğ°Ğ½Ğ³Ğ¸" Ğ¸ Ğ¿Ñ€ĞµĞ¼Ğ¸Ğ¸).
2.  **Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Bot-fallback:** ĞŸÑ€Ğ¸ Ğ¾Ñ‚ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğ¸ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚-ĞºĞ°Ğ±ĞµĞ»ÑŒ, Ñ‡ĞµÑ€ĞµĞ· 30-60 ÑĞµĞº Ğ·Ğ° Ğ½ĞµĞ³Ğ¾ Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ĞµÑ‚ Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑŒ Ğ±Ğ¾Ñ‚. Ğ˜Ğ³Ñ€Ğ° Ğ´Ğ¾Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ´Ğ¾ ĞºĞ¾Ğ½Ñ†Ğ°.
3.  **ĞĞµÑ‚ Race Conditions:** ĞŸÑ€Ğ¸ Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾Ğ¹ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞµ Ñ…Ğ¾Ğ´Ğ° Ğ¾Ñ‚ Ğ´Ğ²ÑƒÑ… ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ² ÑĞµÑ€Ğ²ĞµÑ€ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹, Ğ²Ñ‚Ğ¾Ñ€Ğ¾Ğ¹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ (Ğ¸Ğ»Ğ¸ Ğ¸Ğ³Ğ½Ğ¾Ñ€), ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ½Ğµ Ğ»Ğ¾Ğ¼Ğ°ĞµÑ‚ÑÑ.
4.  **Ğ’Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ:** ĞŸÑ€Ğ¸ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ (`F5`) Ğ¸Ğ³Ñ€Ğ¾Ğº Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ°ĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ `game_state_update` Ğ¸ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ°ĞµÑ‚ Ğ¸Ğ³Ñ€Ğ°Ñ‚ÑŒ.
5.  **Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:** Ğ’ Ğ‘Ğ” Postgres Ğ·Ğ°Ğ¿Ğ¸ÑĞ°Ğ½Ğ° Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ ÑÑ‹Ğ³Ñ€Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿Ğ°Ñ€Ñ‚Ğ¸Ğ¹ Ğ² Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ JSONB Ğ´Ğ»Ñ Ğ°Ğ´Ğ¼Ğ¸Ğ½ĞºĞ¸.

--- END OF FILE ---