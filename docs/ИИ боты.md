# Стратегия подключения ИИ ботов и критерии критичности стола

# Столы

- **Обучающие игры**
    - Игрок нажимает “Играть”
    - Система создает стол и моментально подсаживает к нему 3-х ИИ-ботов
    - Пользователь видит пометку, что это бот
- **Бесплатные игры (с людьми и ИИ-ботами, которые притворяются людьми)**
    - Игрок нажимает “Играть”
    - _Система создает стол_
    - Игрок видит пустой стол (или не пустой, если подсадили)
        - _Если в очереди были другие реальные игроки, то система сразу же подсаживает их_
    - _Если реальных игроков не хватает, то система запускает таймер_
    - Пользователь видит уведомление/индикатор о поиске других игроков
    - Если в течение N секунд (задается в админке), реальный пользователь не появляется, то система подсаживает ИИ-бота
    - Пользователь видит нового игрока (ИИ-бот отображается как реальный игрок без каких-либо особых отметок)
    - Действие повторяется, пока все слоты не будут заполнены
- **Платные игры**
    - Аналогично бесплатной игре, но предусмотрено максимальное кол-во ИИ-ботов за столом (задается в админке)
    - Если игроков не достаточно, ждем до бесконечности, пока игрок сам не отменит
    - **Критерии критичности платного стола**
        - В случаях, когда стол формируется хотя бы с одним ботом, возникает риск финансовой нагрузки на систему/бизнес
        - Например, если создан стол с входом 500 руб. и призовым фондом 1500 руб., и за стол сел хотя бы один ИИ-бот, то в случае проигрыша ИИ-бота, система ничего не зарабатывает.
        - В таком же кейсе, но с двумя ботами, система уже потеряет 500 рублей.
        - Поэтому бизнес заинтересован в том, чтобы в таких кейсах боты выигрывали хотя бы через раз.
        - Чтобы бизнес мог управлять этим риском, система предоставляет возможность администратору вклиниваться в игровой процесс любого стола ([описано в юзер сторис)](https://www.notion.so/Joker-2d5c37041fb48072b580dfb837bcfa62?pvs=21) и фильтровать/сортировать столы по критериям критичности на странице списка столов.
            - Критерии критичности
                - Отрицательная маржа (разница между выручкой и призовым фондом стола)
                - Кол-во ботов за столом
                - Номер раздачи
                - Кто лидирует (бот / реальный человек)
                    - _Подсчитывается в режиме реального времени, по текущей раздаче._
                - С каким отрывом идет лидер по очкам

# Турниры

- Бесплатные
    - Если администратор создает бесплатный турнир с призовым фондом и ИИ-ботами, и при этом рассчитывает, что часть призового фонда заберут боты, то он заинтересован в том, чтобы отследить кол-во ИИ-ботов, которые выигрывают.
    - Для управления этим риском, администратор пользуется фильтром на списке столов аналогично сценарию, который описан для платных столов. Изменятся только параметры фильтрации (критичности).
        - Турнир
        - Кол-во ботов за столом
        - Номер раздачи
        - Кто лидирует (бот / реальный человек)
            - _Подсчитывается в режиме реального времени, по текущей раздаче._
        - С каким отрывом идет лидер по очкам
- Платные
    - Например, если администратор создает платный турнир с призовым фондом и ИИ-ботами и при этом маржа турнира отрицательная. И администратор хочет проконтролировать размер прибыли/убытка (маржи), то он аналогично бесплатным турнирам заинтересован отследить кол-во ИИ-ботов, которые выигрывают.
    - Управления этим риском осуществляется идентично, как на бесплатных турнирах.