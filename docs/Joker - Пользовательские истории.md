# Joker | Пользовательские истории

## Роли

1. Пользователь
2. Боты
    1. Доигрывающий — просто алгоритм, который скидывает первую попавшуюся карту по правилам игры. Активируется, при бездействии пользователя.
        1. Пользователь не проявляет никакую активность.
            1. Пользователь не делает ход в течении отведённого времени.
            2. Пропало интернет соединение.
        2. Пользователь закрыл приложение (Уточнить если это действие легко отследить)
        3. Пользователь осознано нажал кнопку покинуть игру.
    2. ИИ бот — бот на базе искусственного интеллекта среднего уровня сложности. Пользователь играет против ИИ ботов во время обучающей игры. Эти же ИИ боты будут заполнять столы при недостаточном кол-ве реальных пользователей.
        1. _Режим убийцы – высокий уровень игры с минимальным коэффициентом проигрыша._
3. Администратор

## Особые общие требования

- Возможность множественной сортировки (по 2-м и более колонкам)
- Сортировка по всем доступным полям
- Фильтрация по всем доступным поля и возможность выбора условия поиска “И” / “Или”.
    - Даты и числовые значения должны фильтровать диапазонами

## Пользователь

1. Я, как пользователь, перехожу в бота по ссылке:
    1. Вижу основную информацию о боте (приветственный текст) и кнопку старт
    2. Нажимаю кнопку старт
        1. Я, как система:
            1. Если пользователь перешел по реферальной ссылке, то код его спонсора кладем в БД и закрепляем пользователя под спонсором.
    3. Вижу сообщение об успешной регистрации и кнопку “Играть”
2. Я, как пользователь, нажимаю кнопку “Играть”.
    1. Вижу загрузку (анимация загрузки).
        1. Я, как система:
            1. Регистрирую в БД нового пользователя.
            2. Загружаю и вывожу данные игрока.
    2. Вижу начальный экран игры (лобби) с основными данными (эти данные описаны ниже):
        1. [**Баланс**](https://www.notion.so/Joker-2d5c37041fb48072b580dfb837bcfa62?pvs=21)
        2. [**Профиль**](https://www.notion.so/Joker-2d5c37041fb48072b580dfb837bcfa62?pvs=21)
        3. [**Настройки приложения**](https://www.notion.so/Joker-2d5c37041fb48072b580dfb837bcfa62?pvs=21)
        4. [**Партнерская программа**](https://www.notion.so/Joker-2d5c37041fb48072b580dfb837bcfa62?pvs=21)
        5. [**Промо задания**](https://www.notion.so/Joker-2d5c37041fb48072b580dfb837bcfa62?pvs=21)
        6. [**Рейтинг**](https://www.notion.so/Joker-2d5c37041fb48072b580dfb837bcfa62?pvs=21)
        7. [**Столы**](https://www.notion.so/Joker-2d5c37041fb48072b580dfb837bcfa62?pvs=21)
        8. [**Турниры**](https://www.notion.so/Joker-2d5c37041fb48072b580dfb837bcfa62?pvs=21)
    3. Баланс (Я, как пользователь, перехожу в раздел баланс)
        1. Вижу свой внутренний баланс — кол-во баллов CJ (crypto jokers)
        2. Внести депозит.
            1. Нажимаю кнопку пополнить.
            2. Вижу способ пополнения, ввожу сумму.
            3. Нажимаю кнопку подтвердить.
            4. _Описать остальные действия, в зависимости от выбранной платежки._
            5. Вижу увеличение баланса.
        3. Вывести средства.
            1. Нажимаю кнопку вывод.
            2. Вижу способ вывода, ввожу сумму.
            3. Нажимаю кнопку подтвердить.
            4. Описать остальные действия, в зависимости от выбранного способа.
            5. Вижу уменьшение баланса.
        4. Вижу историю транзакций (сортировка, фильтр по всем полям и пагинация).
            1. Вижу подробную таблицу с всеми своими транзакциями (вводы, выводы средств, списания за участие в платных столах и турнирах, начисления за партнеров, административные вознаграждения/штрафы)
                1. ID транзакции | Дата и время транзакции | Тип транзакции | Статус транзакции (Успешно, Отмена операции/Ошибка, На проверке) | Сумма | Валюта | Баланс после операции | Описание / комментарий
    4. Профиль (Я, как пользователь, нажимаю настройки профиля)
        1. Вижу и могу изменить никнейм.
            
        2. Вижу и могу изменить аватар (набор из 5 кринжовых собак).
            
            [Выбранные аватары собак](https://www.notion.so/2d8c37041fb480159e73d475f6d5d4d3?pvs=21)
            
        3. Вижу и могу изменить флаг страны (будет отображаться рядом с автаркой).
            
        4. Вижу своё место в рейтинге (условие формирования в разделе [Рейтинг](https://www.notion.so/User-Story-d09f5c18ff89417bb8caff4689abc1d7?pvs=21)), возможность открыть общий рейтинг.
            
        5. Вижу свой [баланс](https://www.notion.so/Joker-2d5c37041fb48072b580dfb837bcfa62?pvs=21).
            
        6. Вижу кнопку Кошелёк.
            
            1. Если кошелёк уже ранее привязан, то вижу адрес кошелька.
                1. Последняя операция по кошельку (ссылка на транзакции ввода/вывода средств с выбранным соответствующим фильтром)
            2. Если кошелёк ранее не был привязан. Вижу кнопку привязать кошелёк.
            3. Вижу сообщение Открыть wallet в Telegram.
            4. Вижу предупреждение “Приложение запрашивает доступ к кошельку” через введение кода доступа.
            5. Вижу адрес кошелька.
    5. Настройки приложения.
        1. Громкость фоновой музыки.
        2. Громкость звуков.
        3. Язык приложения (В MVP будет только русский).
    6. Партнерская программа (я, как пользователь).
        1. Вижу свой реферальный код
            1. Могу скопировать ссылку в буфер обмена
            2. Могу отправить приглашение другу в телеграмм
        2. Кол-во приглашенных мной партнеров.
        3. Сумма, которую я заработал с приглашенных партнеров (ссылка на транзакции с начислениями с выбранным соответствующим фильтром).
    7. Промо задания.
        1. Вижу раздел со списком заданий и могу посмотреть детали по каждому из них.
            1. Название задания
            2. Описание задания
            3. Вознаграждение
            4. Дата начала, дата завершения
        2. Примеры заданий:
            1. Подпишитесь на Телеграм канал
            2. Подпишитесь на нашу группу ВК
        3. _Администратор должен иметь возможность разместить задание_
        4. _Проверка/модерация задания и начисление вознаграждение за них будет осуществляться вручную администратором_
    8. Рейтинг.
        1. Вижу раздел с общим рейтингом игроков (рейтинг ведётся по количеству первых мест у игрока в рейтинговых играх).
            1. Рейтинговая игра (Очки рейтинга) — это победа в платных столах + победы в столах платных турниров + победы в бесплатных турнирах (только 1-е место).
                1. Например:
                    1. Я поиграл в двадцати платных столах, в десяти из них выиграл
                    2. Принял участие в трех платных турнирах, в первых двух турнирах я выиграл только в первых столах, а в третьем победил (выиграв в трех столах)
                    3. Принял участие в четырех бесплатных турнирах, в одном из них выиграл
                    4. Итого мои очки в общем рейтинге: 10 + 5 + 1
        2. Вижу таблицу
            1. Место | Никнейм | Флаг | Сыграно | Очки рейтинга | Первых мест | Вторых мест | Третьих мест.
    9. Столы (я, как пользователь).
        1. Вижу 5 вариантов столов в виде блоков:
            1. Бесплатная/обучающая игра (игра с ботами).
            2. Бесплатная игра с другими игроками.
            3. Платная игра
                1. Вход по 500р
                    1. Призовой фонд
                2. Вход по 1000р
                    1. Призовой фонд
                3. Вход по 1500р
                    1. Призовой фонд
                4. _3 варианта платных столов с разными стоимостями, которые задаются администратором._
            4. Бесплатная/обучающая игра (игра с ботами)
                1. Вижу загрузочный экран перед появлением стола (если приложение нуждается задержке/каких-то подсчетах/рендере)
                    1. Вижу универсальный загрузочный экран.
                2. Вижу игровой стол со своей аватаркой и аватарками случайных ИИ ботов.
                    1. Начинается [игровой процесс](https://www.notion.so/Joker-2d5c37041fb48072b580dfb837bcfa62?pvs=21) (игра идёт согласно [правилам](https://www.notion.so/Joker-2d2c37041fb480019b6ecd02a5d91e5a?pvs=21), игрок не может выбросить неправильную карту).
                    2. Завершение игры — [конец игры](https://www.notion.so/Joker-2d5c37041fb48072b580dfb837bcfa62?pvs=21).
            5. Бесплатная игра.
                1. Вижу загрузочный экран перед появлением стола
                    
                2. Вижу игровой стол со своей аватаркой и аватарками реальных пользователей.
                    
                    1. _Если я подключился за стол первым, вижу только себя и пустые места._
                        
                    2. _Если пользователей недостаточно, подключаем ИИ ботов._
                        
                        [Стратегия подключения ИИ ботов и критерии критичности стола](https://www.notion.so/2d9c37041fb480e794b7fb2223d5cdc8?pvs=21)
                        
                3. Игровой процесс.
                    
                4. Вижу [конец игры](https://www.notion.so/Joker-2d5c37041fb48072b580dfb837bcfa62?pvs=21).
                    
            6. Платная игра.
                1. Вижу 3 блока с разными ценами за игру и призовой фонд
                2. Нажимаю на один из блоков.
                3. Вижу сообщение о том, что с баланса будут списаны CJ.
                    1. Если баланса недостаточно, то вижу сообщение о необходимости пополнить баланс.
                4. Подтверждаю списание с баланса и вход в платную игру.
                5. Вижу универсальный загрузочный экран перед появлением игрового стола (если приложение нуждается задержке/каких-то подсчетах/рендере)
                6. Вижу игровой стол со своей аватаркой и аватарками подключенных игроков.
                    1. _Если я подключился за стол первым, вижу только себя и пустые места, затем места начинают заполняться другими игроками._
                        1. _Если в течение N секунд за стол не подсел следующий игрок, система подсаживает ИИ бота._
                7. Начинается [игровой процесс](https://www.notion.so/Joker-2d5c37041fb48072b580dfb837bcfa62?pvs=21)
                8. Вижу [конец игры](https://www.notion.so/Joker-2d5c37041fb48072b580dfb837bcfa62?pvs=21).
                    1. Если я занял первое место, вижу информацию о победе и пополнение баланса.
        2. Игровой процесс.
            1. **Раздача на туза**
                
                1. _Первая карта сбрасывается в центр, а следующему раздаётся тому, кто сидит на 12 и дальше по часовой стрелке._
                2. Информация об игре
                    1. Платная/бесплатная, стоимость входа, призовой фонд
                3. Колода
                4. Первая скинутая карта в центре стола
                5. Других игроков
                    1. Никнейм, аватар, флаг, рейтинг
                    2. Выпавшая им карта
                6. Себя, как игрока
                    1. Никнейм, аватар, флаг, рейтинг
                    2. Выпавшая мне карта
                7. Пространство для сообщений системы
                8. Меню
                    1. Выйти из игры.
                        1. При нажатии кнопки выйти или закрытии приложения (будет играть доигрывающий бот, пользователь может вернутся в любой момент).
                    2. Настройки игры.
                        1. Громкость фоновой музыки.
                        2. Громкость звуков.
                    3. Вернуться в игру.
            2. **Выбор взятки**
                
                1. _Аналогично, как в ходах, плюс_
                2. Окно выбора взятки
                    1. “—” и цифры от 1 до 9
                        1. _Какие-то из элементов могу быть неактивны (читай правила игры)_
            3. **Ходы**
                
                1. Информация об игре
                    1. Платная/бесплатная, стоимость входа, призовой фонд
                2. Колоду
                3. Карты хода (взятка)
                4. Раздача по
                5. Отнимается
                6. Других игроков
                    1. Никнейм, аватар, флаг
                    2. Заказов и взято
                    3. Карты рубашкой вверх
                7. Себя, как игрока
                    1. Никнейм, аватар, флаг
                    2. Заказов и взято
                    3. Свои карты
                8. Пространство для сообщений системы
                
                [Сообщения системы во время игрового процесса](https://www.notion.so/2dfc37041fb480e29362e4f85b26afa2?pvs=21)
                
                1. Пространство для сообщений игроков друг другу
                    
                    [Сообщения от пользователя к пользователю](https://www.notion.so/2e0c37041fb4802c8629dc54a049476e?pvs=21)
                    
                2. Элемент взаимодействия с другими игроками
                    
                    1. _Внутри окно с предзаданными сообщениями_
                3. Лист счета ([ссылка](https://www.notion.so/2d3c37041fb480088522edbcea5e3969?pvs=21)).
                    
                    1. Вижу таблицу игроков, количество раздач с набранными очками.
                    2. Отметки на игроках. (Испортился, наличие карты джокера на руках в раздаче, премия и вычеты).
                4. Последняя взятка
                    
                    1. _Вижу последнюю взятку при удерживании кнопки._
                5. Меню
                    
            4. Конец игры.
                
                1. Вижу окно с моим результатом.
                    1. Заголовок: Победа / Поражение
                        
                        1. Сумма выигрыша в случае победы
                    2. Подзаголовок: Ваше место
                        
                    3. Графика с местами: например, пъедестал, медали.
                        
                        ![photo_2025-12-25_12-14-20.jpg](attachment:4f5b513c-ab74-4e55-a9dc-93f4323c6fe7:photo_2025-12-25_12-14-20.jpg)
                        
                    4. Вижу пополнение баланса.
                        
                    5. Кнопка “Посмотреть лист счета”
                        
                        ![photo_2025-12-25_12-14-16.jpg](attachment:cdddefd5-c457-42a5-ad8e-2b57d5ca0860:photo_2025-12-25_12-14-16.jpg)
                        
                    6. Кнопка закрыть / вернуться в лобби.
                        
    10. Турниры (мы в лобби).
        1. **Турнир еще не начат.**
        2. Вижу блок турнира с информацией
            1. Бесплатный или платный | отображение времени до начала турнира | количество участников | сколько осталось мест | стоимость участия | призовой фонд | количество призовых мест.
        3. Нажимаю на блок с турниром.
            1. Попадаю в лобби турнира.
                1. Вижу ту же информацию о турнире.
                    
                2. Кнопка “Детали турнира”
                    
                    1. Вижу подробную информацию о турнире: все, что перечислено сверху + указание приза за каждое место + время на ход
                3. Кнопка “Таблица турнира”
                    
                    1. Этап 1
                        
                        1. Кол-во столов в этапе, кол-во участников в этапе
                        2. Список всех столов (и занятых и не занятых)
                            1. Номер стола
                                1. Список всех слотов (и занятых и не занятых)
                                    1. Аватар, флаг, рейтинг, ник участника, который занял слот
                            2. Вижу за каким я столом
                        3. Информация о местах, которые проходят дальше
                        4. Ссылка на просмотр следующего этапа
                    2. Этап 2
                        
                    3. …
                        
                    4. Финальный стол
                        
                    5. Информация заполняется по мере прохождения турнира
                        
                        1. _Если стол закончил игру, то на него можно нажать и посмотреть его лист счета_
                        
                        ![tournament_tree_16_tables.png](attachment:afbdfedc-1b65-4c5c-9857-3342fb9ac5c5:tournament_tree_16_tables.png)
                        
                4. Кнопка регистрация.
                    
                5. Кнопка “Вернуться в лобби”
                    
                    1. Если турнир не начат выйти получиться. Я вижу предупреждение о последствиях при не явке на турнир.
                        1. _Если пользователь не явится на турнир. Он будет заменён на доигрывающего бота_
            2. Нажимаю регистрация, подтвердить регистрацию.
                1. Если турнир платный, вижу уменьшение баланса.
            3. Возвращаюсь в лобби турнира.
                1. Вместо кнопки регистрация вижу “Вы зарегистрированы”.
            4. В ленте бота вижу напоминания о предстоящем турнире.
                1. За N дней.
                2. За N минут до начала.
        4. **Турнир стартовал.**
            1. **Турнир все еще идет.**
                1. Я все еще в игре.
                    1. Мой стол играет.
                        1. _Перебрасывает за стол._
                        2. Вижу начало [игрового процесса.](https://www.notion.so/Joker-2d5c37041fb48072b580dfb837bcfa62?pvs=21)
                            1. Вижу дополнительную кнопку с таблицей турнира (описана выше).
                        3. Если я побеждаю:
                            1. Другие столы доиграли
                                1. Перебрасывает за следующий стол
                            2. Другие столы все еще играют
                                1. Ожидаю, когда доиграют другие столы (описано ниже)
                    2. Ожидаю, когда доиграют другие столы.
                        1. Попадаю в лобби турнира.
                        2. _Как только другие столы доигрывают, меня автоматом перебрасывает за следующий стол._
                2. Я вылетел из турнира.
                    1. Вижу сообщение о сожалении и кнопку вернутся на главный экран.
                        1. Если пользователь занял одно из призовых мест то дополнительно вижу сумма выигрыша и увеличение баланса.
                3. Я побели в турнире (см. турнир закончен).
            2. **Турнир закончен**
                1. Попадаю в лобби турнира
                    1. Вижу туже информацию, плюс:
                2. Я занял призовое место
                    1. Вижу сообщение о поздравлении, занятое место и сумму выигрыша.
                        1. _Вижу пополнение баланса._
                3. Я не занял никаких мест
                    1. Вижу сообщение о занятом месте.

## Администратор

1. Я, как администратор, авторизуюсь в панели администрирования по логину и паролю.
2. Попадаю в панель, вижу и могу нажать
    1. Управление пользователями (фильтр, сортировка по всем полям, пагинация)
        1. Детальная страница пользователя
            1. Информационные поля
                1. ID пользователя
                2. Дата регистрации
                3. Дата обновления
                4. Баланс
                    1. Депозиты
                    2. Выведено
                    3. Прибыль игрока
                5. Реферальные связи
                    1. Реферальный код
                    2. Спонсор (возможность изменять)
                    3. Рефералы
                        1. Кол-во
                        2. Ссылка на поиск по пользователям со всеми рефералами этого пользователя
                6. Статистика
                    1. Кол-во игр за столами (ссылка на список столов)
                    2. Кол-во участий в турнирах (ссылка на список турниров)
                    3. Рейтинг
                    4. Кол-во занятых мест
                        1. 1,2,3,4-е места в платных столах
                        2. 1,2,3,4-е места в бесплатных столах
                        3. 1,2,3,4-е места в столах платных турниров
                        4. 1,2,3,4-е места в столах бесплатных турнирах
                        5. призовые места в платных турнирах
                        6. призовые места в бесплатных турнирах
                    5. Столы онлайн (с отметкой типа стола и принадлежности к турниру)
                        1. _Возможность перейти отсюда сразу к управлению столом_
                    6. Турниры онлайн
                        1. _Пока всегда будет один для одного пользователя_
                        2. _Возможность перейти отсюда сразу к управлению турниром_
            2. Изменяемые поля
                1. Никнейм
                2. Аватар
                3. Страна
                4. Статус аккаунта (активен / заблокирован)
                5. Галочка, что это ИИ-бот
            3. Особые фильтры: по одному или нескольким столам, по одному или нескольким турнирам
    2. Финансовые транзакции (фильтр, сортировка по всем полям, пагинация)
        1. Вводы, выводы средств, списания за участие в платных столах и турнирах, начисления за партнеров, административные вознаграждения/штрафы
            1. Сумма зачисления
            2. Реальная сумма
            3. Валюта
            4. Тип операции
            5. Инициатор (администратор, платежная система, система)
            6. Получатель
            7. Комментарий
        2. Возможность для админа добавлять/списывать баланс конкретного пользователя
            1. Сумма
            2. Комментарий
            3. Пользователь
        3. Фильтры: по одному или нескольким столам/турнирам/пользователям, тип пользователя (ИИ-бот, реальный), типу операции
        4. _Отображать суммы всех найденных записей (чтобы сразу найти сколько было депозитов по турниру)_
    3. Событийные транзакции (фильтр, сортировка по всем полям, пагинация)
        1. Типы событийных транзакций
            1. Регистрация пользователя
            2. Столы
                1. Стол создан.
                    1. Игрок/ИИ-бот посажен за стол
                    2. Игра начата
                        1. События внутри игры (Подумать)
                    3. Игра окончена
            3. Турниры
                1. Создан турнир
                2. Пользователь/ИИ-бот зарегистрирован в турнире
                3. Турнир начат
                    1. Этап N начался
                        1. Игрок/ИИ-бот посажен за стол.
                        2. Игра начата / окончена (см выше)
                    2. Этап N закончен
                4. Турнир закончен.
        2. Поля:
            1. ID действия | Дата и время | Игрок | Тип игрока (ИИ-бот или реальный) | Тип действия | Контекст (стол / турнир) | ID стола / турнира | Детали действия
        3. Особые фильтры: по игроку, типу действия, столу, турниру, время и дата.
    4. Модерация вводов / выводов (требует согласования необходимости)
    5. Управление столами
        1. Просматривать список столов (фильтр, сортировка по всем полям, пагинация)
        2. Просматривать детальную страницу стола
        3. Список всех полей сущности стол
            1. Тип стола (см. настройки администратор)
            2. Стоимость входа
            3. Кол-во игроков (реальных / ботов)
            4. Кто лидирует (бот / реальный человек)
            5. С каким отрывом идет лидер по очкам
            6. Маржа (разница между выручкой и призовым фондом стола)
            7. Выручка (без учета ботов = стоимость входа x кол-во реальных игроков)
            8. Призовой фонд
            9. Номер раздачи
            10. Время создания
            11. Время старта игры
            12. Время завершения игры
            13. Время на ход
            14. Статус (создан, игра, игра завершена)
            15. Ссылка на турнир
            16. Посмотреть стол
                1. Можем посмотреть стол от лица любого пользователя, нажав на него
                2. Видим всю колоду в открытом виде
                3. Можем передвинуть любые карты в колоде (которыми еще не сходили)
                    1. Кнопка случайного перемешивания
                    2. Возможность ручного передвижения
                4. Включить у бота режим _убийцы._
                    1. _Высокий уровень игры с минимальным коэффициентом проигрыша._
    6. Управление турнирами
        1. Создавать турниры (бесплатные, платные)
        2. Изменять турниры
        3. Просматривать список турниров (фильтр, сортировка по всем полям, пагинация)
            1. Все поля сущности турнир
                1. _Все изменяемые поля становятся информационными после старта турнира (во время регистрации они все еще изменяемые)_
                2. ID турнира _[инфо, список]_
                3. Тип (платный или бесплатный) _[изменяемое, список]_
                    1. _Либо регулируем за счет стоимости входа “0”._
                4. Статус прогресса турнира _[информационное, список]_
                    1. Не опубликован
                    2. Идет регистрация
                    3. Начат (этап 1, 2,3)
                    4. Отменён.
                    5. Завершен
                5. Количество зарегистрированных участников турнира (реальных / ботов)
                    1. План _[изменяемое, список]_
                    2. Факт _[информационное, список]_
                        1. _Ссылка на список пользователей с фильтром_
                6. Количество еще не вылетевших участников (реальных / ботов)
                7. Фиксированная стоимость входа _[инфо, список]_
                    1. _Админ должен видеть общую сумму, которая суммируем все указанные значения (чтобы понимать сколько поступит всего средств в систему)_
                8. Выручка
                    1. План _[инфо-рассчитываемое, список]_
                    2. Факт _[инфо, список]_
                9. Количество призовых мест _[изменяемое, список]_
                10. Cумма выигрыша для каждого призового места _[изменяемое]_
                11. Призовой фонд
                    1. План _[изменяемое, список]_
                    2. Факт _[инфо, список]_
                12. Время на ход (для ускорения игры проф. игроки любят играть быстро) _[изменяемое, список]_
                13. Дата и время начала регистрации _[изменяемое, список]_
                14. Дата и время начала самого турнира _[изменяемое, cписок]_
                    1. _Если время истекло, а достаточное количество пользователи не зарегистрировано:_
                        1. _Отменяем турнир_
                        2. _Передвигаем дату начала_
                        3. _Вручную добавляем ботов_
                15. Дата+время начала добавления ботов и дата+время завершения добавления ботов _[изменяемое]_
                    1. Максимальное количество ботов
                    2. _Боты будут случайно добавлять в заданном интервале, имитируя регистрацию реальных игроков_
                16. Добавление ботов вручную
                    1. _Добавление ботов вручную не влияет на общее количество ботов, которые добавлены автоматически_
                17. Статус публикации (не опубликован, опубликован) [изменяемое, список]
                18. Ссылка на столы турнира _[список]_
    7. Управление заданиями (фильтр по типу, дате, пользователю, статусу, пагинация)
        1. Просматривать список заданий
        2. Создавать / изменять задания
        3. Все поля сущности задание
            1. ID задания
            2. Название задания
            3. Сокращенное описание задания
            4. Детальное описание задания
            5. Дата начала
            6. Дата завершения
            7. Статус публикации (не опубликовано, опубликовано)
    8. Уведомления всех пользователей через Telegramm бота (фильтр по дате, типу, пагинация)
        1. Создавать / изменять уведомления
            1. Отправлять уведомления
        2. Просматривать список уведомлений
        3. Список всех полей сущности уведомление
            1. ID уведомления
            2. Тип (общие, маркетинг, турнир)
            3. Описание
                1. _Продумать реализацию редактора_
            4. Дата создания
            5. Дата изменения
            6. Дата отправки
            7. Время отправки
                1. _Возможность отправить прямо сейчас_
    9. Глобальные настройки администратора
        1. Платные столы
            1. Тип 1:
                1. стоимость входа
                2. призовой фонд
                3. время на ход
                4. максимальное количество ИИ-ботов за столом
            2. Тип 2: аналогично
            3. Тип 3:
        2. Бесплатные столы
            1. С ботами (обучающая игра)
                1. Время на ход
            2. С пользователями
                1. Время на ход
        3. Кол-во секунд, через которое за стол подсаживается бот

[Стратегия подключения ИИ ботов и критерии критичности стола](https://www.notion.so/2d9c37041fb480e794b7fb2223d5cdc8?pvs=21)

# Неактуальное / архив

Примеры таблиц представлены в ‣

- **Старая версия**
    
    ### Роли
    
    1. Пользователь
    2. Боты
        1. Доигрывающий. Это тупой алгоритм, который скидывает карту первую попавшуюся по правилам игры.
        2. ИИ бот.
    3. Администратор
    
    ### Пользователь
    
    4. Я, как пользователь, перехожу в бота по ссылке:
        1. Вижу основную информацию о боте (приветственный текст) и кнопку старт
        2. Нажимаю кнопку старт
            1. Я, как система:
                1. Если пользователь перешел по реферальной ссылке, то код его спонсора кладем в БД и закрепляем пользователя под спонсором.
        3. Вижу сообщение об успешной регистрации и кнопку “Играть”
    5. Я, как пользователь, нажимаю кнопку “Играть”.
        1. Вижу загрузку (анимация загрузки).
            
            1. Я, как система:
                1. Регистрирую в БД нового пользователя.
                2. Загружаю и вывожу данные игрока.
        2. Вижу начальный экран игры с основными данными (эти данные описаны ниже):
            
            1. [**Баланс**](https://www.notion.so/User-Story-d09f5c18ff89417bb8caff4689abc1d7?pvs=21)
            2. [**Профиль**](https://www.notion.so/User-Story-d09f5c18ff89417bb8caff4689abc1d7?pvs=21)
            3. [**Настройки приложения**](https://www.notion.so/User-Story-d09f5c18ff89417bb8caff4689abc1d7?pvs=21)
            4. [**Партнерская программа**](https://www.notion.so/User-Story-d09f5c18ff89417bb8caff4689abc1d7?pvs=21)
            5. [**Промо задания**](https://www.notion.so/User-Story-d09f5c18ff89417bb8caff4689abc1d7?pvs=21)
            6. [**Рейтинг**](https://www.notion.so/User-Story-d09f5c18ff89417bb8caff4689abc1d7?pvs=21)
            7. [**Столы**](https://www.notion.so/User-Story-d09f5c18ff89417bb8caff4689abc1d7?pvs=21)
            8. [**Турниры](https://www.notion.so/User-Story-d09f5c18ff89417bb8caff4689abc1d7?pvs=21).**
        3. Баланс (Я, как пользователь, перехожу в раздел баланс)
            
            1. Вижу баланс (вижу кол-во баллов, которые могу использовать для игр и выводить, билетов для турнира).
            2. Внести депозит.
                1. Нажимаю кнопку пополнить.
                2. Вижу способ пополнения, ввожу сумму.
                3. Подтверждаю оплату.
                4. Дожидаюсь прибавления баланса.
            3. Вывести средства.
                1. Нажимаю кнопку вывод.
                2. Вижу способ вывода.
                3. Ввожу сумму.
                4. Подтверждаю вывод.
                5. Дожидаюсь поступления средств.
                6. Система уменьшает баланс.
            4. Вижу список транзакций (сортировка, фильтр по всем полям и пагинация).
                1. ID транзакции
                2. Дата и время транзакции.
                3. Тип транзакции (пополнение, снятие, за игры, пополнение за партнерскую программу)
                4. Статус транзакции (успешно, в обработке, отмена/ошибка)
                5. Сумма.
                6. Валюта.
                7. Баланс после операции.
                8. Описание, комментарий.
        4. Профиль (Я, как пользователь, нажимаю настройки профиля)
            
            1. Вижу и могу изменить никнейм.
            2. Вижу и могу изменить аватар (набор из 5 кринжовых собак).
            3. Язык приложения, флаг страны.
            4. Вижу своё место в рейтинге (условие формирования в разделе [Рейтинг](https://www.notion.so/User-Story-d09f5c18ff89417bb8caff4689abc1d7?pvs=21))
            5. Вижу свой [баланс](https://www.notion.so/User-Story-d09f5c18ff89417bb8caff4689abc1d7?pvs=21).
            6. Вижу кнопку Кошелёк.
                1. Вижу кнопку привязать кошелёк.
                2. Вижу сообщение Открыть wallet в Telegram.
                3. Вижу предупреждение “Приложение запрашивает доступ к кошельку” через введение кода доступа.
                4. Вижу адрес кошелька.
        5. Настройки приложения.
            
            1. Громкость фоновой музыки.
            2. Громкость звуков.
        6. Партнерская программа (я, как пользователь).
            
            1. Вижу свой реферальный код
                1. Могу скопировать ссылку в буфер обмена
                2. Могу отправить приглашение другу в телеграмм.
            2. Вижу код моего спонсора (под кем я зарегистрировался, если есть).
            3. Кол-во приглашенных мной партнеров.
            4. Сумма, которую я заработал с приглашенных партнеров.
        7. Промо задания.
            
            1. Вижу раздел со списком заданий и награду на них и статус выполнения.
                1. Подписка на группу телеграмм, на сколько пополнится баланс, кнопку подписаться, статус не выполнено.
                2. Сделать репост в соц.сети, награда за каждую соц сеть + билет если выполнены все. значки соц.сетей.
                3. Получаю награду после проверки модератором.
        8. Рейтинг.
            
            1. Вижу раздел с общим рейтингов игроков (Рейтинг ведётся по количеству первых мест у игрока в рейтинговых играх).
            2. Вижу таблицу (Никнейм | Флаг | Первых мест | Всего Игр | Вторых мест | Третьих мест | Четвертых мест). (Рейтинг ведётся по количеству первых мест. строчка пользователя зафиксирована и не исчезает при прокрутке всей таблицы)
        9. Столы (я, как пользователь).
            
            1. Вижу 3 варианта столов в виде блоков с конкретной информацией (с ботами, бесплатные и платные игры).
                1. Игра с ботами
                    1. Вижу загрузочный экран с надписью “Подбор игроков…”(возможно какой-то элемент рядом обозначающий загрузку: кружок, перетасовка колоды карт). Вижу свою аватарку и флаг, а так же ещё 3 свободных места. Свободные места начинают прокручиваться аватарками имитируя перебор. Один за другим появляются аватары ботов. Надпись “Игра начинается”, либо сразу переход на следующих экран.
                    2. Вижу [конец игры](https://www.notion.so/User-Story-d09f5c18ff89417bb8caff4689abc1d7?pvs=21).
                2. Бесплатная игра.
                    1. Загрузка аналогична [подбору с ботами](https://www.notion.so/User-Story-d09f5c18ff89417bb8caff4689abc1d7?pvs=21), только вместо ботов игроки, их никнеймы, аватары, флаги и рейтинг.
                    2. Игрок не найден. заменяется доигрывающим ботом.
                    3. Вижу [конец игры](https://www.notion.so/User-Story-d09f5c18ff89417bb8caff4689abc1d7?pvs=21).
                3. Платная игра.
                    1. Вижу цену за игру.
                    2. Нажимаю и вижу сообщение о необходимости оплаты.
                    3. Подтверждаю оплату и вижу уменьшение баланса. (либо ошибку если средств недостаточно)
                    4. Загрузка аналогична [подбору с ботами](https://www.notion.so/User-Story-d09f5c18ff89417bb8caff4689abc1d7?pvs=21), только вместо ботов игроки их никнеймы, аватары, флаги и рейтинг.
                    5. Игрок не найден. заменяется доигрывающим ботом
                    6. Вижу [конец игры](https://www.notion.so/User-Story-d09f5c18ff89417bb8caff4689abc1d7?pvs=21).
                    7. Вижу пополнение баланса.
            2. Игровой процесс.
                1. Вижу стол с противниками (никнеймы, картинки аватаров, флаги).
                    
                2. Кнопка взаимодействия с другими игроками (отправка из перечня реплик).
                    
                3. Вижу поле с перечнем сообщений от системы.
                    
                4. Вижу поле с подсчетом заказов/взято.
                    
                5. Кнопку меню.
                    
                    1. Выйти из игры.
                        1. При выходе из игры игрок заменяется доигрывающим ботом.
                    2. Настройки игры.
                        1. Громкость фоновой музыки.
                        2. Громкость звуков.
                        3. Возможность выключить отображение прихода реплик от других игроков.
                    3. Вернуться в игру.
                6. Вижу анимацию автоматического выбора раздающего (“Тузование”).
                    
                7. Вижу анимацию раздачи карт и свои карты.
                    
                8. Вижу доступные варианты взяток согласно установленным правилам игры.
                    
                9. Анимацию хода игроков и забравшего взятку.
                    
                10. Кнопку Лист счета ([ссылка](https://www.notion.so/2d3c37041fb480088522edbcea5e3969?pvs=21)).
                    
                    1. Вижу таблицу игроков, количество раздач с набранными очками.
                    2. Отметки на игроках. (Испортился, наличие карты джокера на руках в раздаче, премия и вычеты).
                11. Кнопка Посмотреть последнюю взятку.
                    
                    1. Вижу последнюю взятку при удерживании кнопки.
                12. Конец игры. Вижу окно с моим результатом. Сверху слово Победа/Поражение (победа только при занятом 1ом месте, остальное проигрыш с указанием занятого места). По центру миниатюрный пьедестал с никами(возможно миниаватарами) игроков на занятых позициях, золото, серебро, медь и серое 4ое и получаемой наградой за место(при платной игре). Снизу можно посмотреть лист счёта всей игры. В конце листа тоже могут быть отметки о занятом месте. кнопка вернуться в лобби.
                    
                    ![photo_2025-12-25_12-14-16.jpg](attachment:cdddefd5-c457-42a5-ad8e-2b57d5ca0860:photo_2025-12-25_12-14-16.jpg)
                    
                    ![photo_2025-12-25_12-14-20.jpg](attachment:4f5b513c-ab74-4e55-a9dc-93f4323c6fe7:photo_2025-12-25_12-14-20.jpg)
                    
        10. Турниры (я, как пользователь).
            
            1. Вижу блок турнирных столов в виде блока с информацией (бесплатные, платные и отображение времени до ближайшего турнира такого турнира).
                
            2. Вижу в виде списка блоки турниров с отображенной на них информацией ( Стоимость участия / бесплатно, дата и время начала, количество участников, количество мест, призовой фонд, количество призовых мест).
                
                1. Вижу самым первым всегда блок с бесплатным турниром. (Дата и время начала, количество участников, стоимость бесплатно подсвечена или мерцает, призовой фонд, количество призовых мест)
                2. Вижу далее блоки с платными турнирами. Сверху вниз идут турниры по количеству свободных мест от меньшего к большему. (Дата и время начала, количество участников, сколько осталось мест, стоимость участия, призовой фонд, количество призовых мест).
            3. Нажимаю на выбранный блок с турниром.
                
                1. Вижу сообщение подтверждение регистрации. Просьба ознакомиться с правилами и условиями турнира и сумму к оплате (если она есть или количество билетов для участия). Предупреждение что участвовать можно только в одном турнире за раз.
                2. Подтверждаю оплату за участие и ознакомление с правилами и условиями (только ознакомление если турнир бесплатный).
                3. После оплаты вижу уменьшение баланса, билетов.
                4. Вижу сообщение о успешной регистрации и кнопку вернуться в раздел турниры.
            4. В разделе с турнирами вижу блок только с своим турниром. (Дата и время начала, количество оставшихся мест и призовой фонд).
                
            5. Вижу кнопку “Полная таблица турнира” (Сначала просто заполняется 1ый этап. Далее, после начала турнира, обновляется после завершения каждой игры).
                
                ![tournament_tree_16_tables.png](attachment:afbdfedc-1b65-4c5c-9857-3342fb9ac5c5:tournament_tree_16_tables.png)
                
                1. Вижу распределение участников по этапам (олимпийская система).
                2. Вижу за каким я столом и кто мой противник (ник и их рейтинг).
            6. Вижу кнопку выхода в меню.
                
                1. Если турнир не начат выйти получиться. Я вижу предупреждение о последствиях при не явке на турнир.
            7. Получаю уведомление внутри системы о скором начале турнира.
                
                1. Вижу сообщение через бота (при условии что не запустил приложение)
                2. Захожу в турнир. Вижу отсчет.
                3. Вижу кнопку “[Полная таблица турнира](https://www.notion.so/User-Story-d09f5c18ff89417bb8caff4689abc1d7?pvs=21)”.
                4. Вижу кнопку выйти из турнира.
                    1. Получаю предупреждение о невозможности возвращения и потери денег. (при выходе будет играть доигрывающий бот).
            8. Принимаю участие.
                
                1. Вижу загрузку стола.
                2. Если игрок не явился – замена доигрывающим ботом.
                3. Вижу начало [игрового процесса](https://www.notion.so/User-Story-d09f5c18ff89417bb8caff4689abc1d7?pvs=21).
                    1. При нажатии кнопки выйти. Получаю предупреждение о невозможности возвращения и потери денег. (при выходе будет играть доигрывающий бот).
                    2. Если пользователь закрыл приложение замена на доигрывающего бота.(возможность вернуться после согласования)
                4. Вижу результат игры.
                    1. При выигрыше вижу сообщение поздравление с переходом в следующий этап турнира и кнопку продолжить турнир.
                    2. При проигрыше сообщение о сожалении и кнопку вернутся на главный экран.
            9. Нажимаю продолжить турнир и вижу обновленную “[Полная таблица турнира](https://www.notion.so/User-Story-d09f5c18ff89417bb8caff4689abc1d7?pvs=21)”.
                
                1. Кто за каким столом победил и с каким счётом.
                2. Какие игры завершены, а какие продолжаются.
                3. Вижу будущих противников на следующем этапе турнира.
            10. Жду полного завершения первого этапа и начала следующего и так до конца.
                
            11. По окончанию турнира вижу поздравление и занятое мной место. Пьедестал с никнеймами, аватарами и наградой.
                
                1. Вижу мой выигрыш.
                2. Вижу кнопку вернуться в главное меню.
                3. Вижу пополнение баланса, билетов.
    
    ### Администратор
    
    6. Я, как администратор, авторизуюсь в панели администрирования по логину и паролю.
    7. Попадаю в панель, вижу и могу нажать
        1. Управление пользователями.
            1. Просмотр всех пользователей (фильтр, сортировка по всем полям, пагинация)
                1. ID пользователя
                2. Никнейм.
                3. Статус аккаунта (активен / заблокирован)
                4. Дата регистрации
                5. Баланс
                6. Реферальный код
                7. Спонсор.
            2. Просмотр и изменение данных пользователя.
                1. Блокировка / разблокировка пользователя
                2. Ручное изменение баланса (с комментарием).
                3. Просмотр изменение рейтинга.
                4. Просмотр всех транзакций пользователя.
                5. Просмотр связанных сущностей:
                    1. Столы
                    2. Турниры
                    3. Реферальные связи.
        2. Просмотр партнёрской программы.
            1. Просмотр списка всех рефералов (фильтр, сортировка по всем полям, пагинация.)
            2. Просмотр и изменение данных реферала.
                1. ID пользователя
                2. Никнейм
                3. Дата регистрации реферала
                4. Количество приглашенных
                5. Общий заработок.
                6. Изменение спонсора.
                7. Отключение от партнёрской программы.
        3. Просмотр истории транзакций (фильтр, сортировка по всем полям, пагинация.).
            1. Просмотр всех типов транзакций (пополнение, снятие, столы, турниры партнёрская программа)
            2. Управление транзакциями
                1. Подтверждение / отклонение заявок
                2. Комментарий при отказе
                3. Статусы транзакций (успешно, в обработке, отмена)
            3. Кнопка Аналитика.
                1. Общий оборот
                2. Доход платформы
                    1. Комиссии со столов
                    2. Комиссии с турниров
                    3. Комиссии платёжных систем
                3. Доход по партнёрской программе
        4. История действий игроков.
            1. Список всей действий (фильтр по игоку, типу действия, привязка к столу/турниру, таймлайн, пагинация)
            2. Типы действий (вход, пополнение, вывод , участие в играх турнире)
            3. Просмотр ходов в игре.
        5. Полный лог всех операций. (фильтр по дате, типу операции, пагинация)
            1. Все действия пользователей.
            2. Все действия в играх
                1. Столы (платные, бесплатные)
                    1. Создание столов
                    2. Полный лог действий игроков за столами
                2. Турниры (платные, бесплатные)
                    1. Создание турнира
                    2. Участники
                    3. Полный лог действий игроков за столами
            3. Транзакции.
        6. Управление заданиями.
            1. Список всех созданных заданий.
            2. Создание новых заданий
            3. Модерация выполненных.
                1. Список выполненных заданий.
                    1. Задание, кем выполнено, какая награда, Подтверждение статуса выполнено/отказ.
        7. Управление столами.
            1. Процент комиссии площадки.
            2. Список всех столов. (фильтр по дате, типу стола, статус, пагинация)
            3. Просмотр игроков за столом
            4. История ходов в игре за каждым игроком.
            5. Возможность вклиниться в активный стол.
                1. Видеть карты всех игроков
                2. Управлять раздачей карт игрокам.
        8. Управление турнирами.
            1. Создавать турниры (бесплатные, платные).
                1. Количество участников турнира.
                2. Настройка призового фонда.
                    1. Процент комиссии площадки.
                    2. Количество призовых мест от 1 до 4 и их награда в % от общего фонда (сумма не должна превышать 100%)
                        1. 🥇 1 место — 40%
                        2. 🥈 2 место — 30%
                        3. 🥉 3 место — 20%
                        4. 4️⃣ 4 место — 10%
            2. Список всех турниров (фильтр по дате, типу, статус, пагинация)
                1. Просмотр участников и их результатов.
                2. Управление участниками.
                3. Статусы столов (активен / игра закончена)
                4. Просмотр игроков за столом.
                5. Возможность вклиниться в активный стол.
                    1. Видеть карты всех игроков
                    2. Управлять раздачей карт игрокам.
            3. Просмотр, управление призовым фондом и выплатами.